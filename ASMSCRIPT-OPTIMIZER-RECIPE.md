# **ASMSCRIPT-OPTIMIZER-RECIPE v1.4.0**
**AssemblyScript WebAssembly ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©çµ±åˆå‹å˜ä¸€HTMLã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆãƒ¬ã‚·ãƒ”**

---

## **ğŸ“Œ ã“ã®ãƒ¬ã‚·ãƒ”ã«ã¤ã„ã¦**

ç”ŸæˆAIãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã‚’è§£é‡ˆã—ã€AssemblyScriptã‚³ãƒ¼ãƒ‰ã‚’ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§WebAssemblyã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ»å®Ÿè¡Œã™ã‚‹**é«˜æ€§èƒ½å˜ä¸€HTMLãƒ•ã‚¡ã‚¤ãƒ«**ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ãŸã‚ã®æ±ç”¨æŒ‡ç¤ºæ›¸ã§ã™ã€‚æœ¬ãƒ¬ã‚·ãƒ”ã¯ç‰¹å®šã®AIç’°å¢ƒã«ä¾å­˜ã›ãšã€ã‚ã‚‰ã‚†ã‚‹ç”ŸæˆAIã‚·ã‚¹ãƒ†ãƒ ã§åˆ©ç”¨å¯èƒ½ãªè¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚

---

### **åŸºæœ¬æ©Ÿèƒ½**
- ğŸš€ **è‡ªå‹•åˆæœŸåŒ–**: ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ»å®Ÿè¡Œé–‹å§‹
- ğŸ”§ **15ç¨®é¡ä»¥ä¸Šã®æœ€é©åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³**: è©³ç´°ãªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«åˆ¶å¾¡
- ğŸ“¦ **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: å¤šæ§˜ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¯¾å¿œ
- âš¡ **CDNãƒ™ãƒ¼ã‚¹**: å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ä¸è¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ã§å®Œçµ

---

## **ğŸ¯ AIå®Ÿè£…ã®æ‰‹é †**

### **ã‚¹ãƒ†ãƒƒãƒ—0: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ã®ç¢ºèªï¼ˆå¿…é ˆï¼‰**

AIã¯æœ€åˆã«ä»¥ä¸‹ã®ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã€è¦æ±‚ãŒä¸æ˜ç¢ºãªå ´åˆã¯**å¿…ãšä½œæ¥­ã‚’ä¸­æ–­**ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã‚’æ±‚ã‚ã¾ã™ï¼š

#### **è¦æ±‚æ˜ç¢ºæ€§ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**
1. **å…·ä½“çš„ãªå‡¦ç†å†…å®¹ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ**
   - âŒ ä¸æ˜ç¢ºãªä¾‹: ã€ŒAssemblyScriptã§ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã€
   - âœ… æ˜ç¢ºãªä¾‹: ã€ŒAssemblyScriptã§ç´ æ•°ã‚’è¨ˆç®—ã™ã‚‹ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã€

2. **ç”¨é€”ã‚„ã‚´ãƒ¼ãƒ«ãŒæ˜ç¢ºã‹ï¼Ÿ**
   - âŒ ä¸æ˜ç¢ºãªä¾‹: ã€Œæœ€é©åŒ–ã—ãŸã„ã€
   - âœ… æ˜ç¢ºãªä¾‹: ã€Œç”»åƒã®ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã‚’é«˜é€ŸåŒ–ã—ãŸã„ã€

3. **å…¥å‡ºåŠ›ã®ä»•æ§˜ãŒæ¨æ¸¬å¯èƒ½ã‹ï¼Ÿ**
   - âŒ ä¸æ˜ç¢ºãªä¾‹: ã€Œãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã€
   - âœ… æ˜ç¢ºãªä¾‹: ã€ŒCSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã€

#### **ä½œæ¥­ä¸­æ–­ã¨å•ã„åˆã‚ã›ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**

```markdown
â“ **AssemblyScriptã§å®Ÿè£…ã™ã‚‹å†…å®¹ã‚’æ•™ãˆã¦ãã ã•ã„**

ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’å®Ÿè£…ã—ãŸã„ã‹æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ
ä»¥ä¸‹ã®æƒ…å ±ãŒã‚ã‚‹ã¨ã€æœ€é©ãªWebAssemblyã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆã§ãã¾ã™ï¼š

**1. ä½•ã‚’ä½œã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ**ï¼ˆä¾‹ã‚’é¸æŠã¾ãŸã¯è‡ªç”±è¨˜è¿°ï¼‰
â–¡ è¨ˆç®—å‡¦ç†ï¼ˆæ•°å€¤è¨ˆç®—ã€çµ±è¨ˆã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè¡Œãªã©ï¼‰
â–¡ ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆCanvasæç”»ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚²ãƒ¼ãƒ ãªã©ï¼‰  
â–¡ ãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€å¤‰æ›ã€åˆ†æãªã©ï¼‰
â–¡ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ„ãƒ¼ãƒ«ï¼ˆã‚¨ãƒ‡ã‚£ã‚¿ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãªã©ï¼‰
â–¡ ãã®ä»–: [å…·ä½“çš„ã«è¨˜è¿°ã—ã¦ãã ã•ã„]

**2. å…·ä½“çš„ãªå‡¦ç†å†…å®¹**
ä¾‹ï¼š
- ã€Œ1000å€‹ã®ç´ æ•°ã‚’é«˜é€Ÿè¨ˆç®—ã—ãŸã„ã€
- ã€Œãƒœãƒ¼ãƒ«ã®ç‰©ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚ŠãŸã„ã€
- ã€Œç”»åƒã«ãƒ•ã‚£ãƒ«ã‚¿ã‚’é©ç”¨ã—ãŸã„ã€
- ã€Œãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§éŸ³å£°ã‚’å‡¦ç†ã—ãŸã„ã€

**3. æœŸå¾…ã™ã‚‹æœ€é©åŒ–ã®æ–¹å‘æ€§**ï¼ˆä»»æ„ï¼‰
â–¡ å®Ÿè¡Œé€Ÿåº¦ã‚’æœ€å„ªå…ˆ
â–¡ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’æœ€å°åŒ–
â–¡ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’æŠ‘åˆ¶
â–¡ ãƒãƒ©ãƒ³ã‚¹é‡è¦–

å…·ä½“çš„ãªè¦æœ›ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚
```

### **ã‚¹ãƒ†ãƒƒãƒ—0.5: AssemblyScriptãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å‹•çš„å–å¾—**

HTMLã‚’ç”Ÿæˆã™ã‚‹å‰ã«ã€AIã¯ä»¥ä¸‹ã®æ‰‹é †ã§æœ€æ–°ã®å®‰å®šç‰ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã—ã¾ã™ï¼š

#### **å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—ã®å®Ÿè£…**

```javascript
// ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
const VersionManager = {
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹
    cache: {
        get() {
            try {
                const cached = sessionStorage.getItem('asc_version_cache');
                if (cached) {
                    const data = JSON.parse(cached);
                    // 1æ™‚é–“ä»¥å†…ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯æœ‰åŠ¹
                    if (Date.now() - data.timestamp < 3600000) {
                        return data.version;
                    }
                }
            } catch (e) {}
            return null;
        },
        set(version) {
            try {
                sessionStorage.setItem('asc_version_cache', JSON.stringify({
                    version,
                    timestamp: Date.now()
                }));
            } catch (e) {}
        }
    },
    
    async getLatestVersion() {
        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯
        const cached = this.cache.get();
        if (cached) {
            console.log(`[Version] Using cached: ${cached}`);
            return cached;
        }
        
        // jsDelivrå„ªå…ˆã®å–å¾—æˆ¦ç•¥
        const strategies = [
            { name: 'jsDelivr API', fn: () => this.fetchFromJsDelivr() },
            { name: 'jsDelivr Package', fn: () => this.fetchJsDelivrPackageJson() },
            { name: 'Unpkg', fn: () => this.fetchFromUnpkg() }
        ];
        
        for (const strategy of strategies) {
            try {
                console.log(`[Version] Trying ${strategy.name}...`);
                const version = await Promise.race([
                    strategy.fn(),
                    this.timeout(3000)
                ]);
                
                if (version && this.isValidStableVersion(version)) {
                    console.log(`[Version] Success: ${version}`);
                    this.cache.set(version);
                    return version;
                }
            } catch (e) {
                console.warn(`[Version] ${strategy.name} failed`);
            }
        }
        
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        return "0.28.8";
    },
    
    async fetchFromJsDelivr() {
        const response = await fetch('https://data.jsdelivr.com/v1/package/npm/assemblyscript');
        const data = await response.json();
        const stable = data.versions.filter(v => this.isValidStableVersion(v));
        return stable[0];
    },
    
    async fetchJsDelivrPackageJson() {
        const response = await fetch('https://cdn.jsdelivr.net/npm/assemblyscript@latest/package.json');
        const data = await response.json();
        return data.version;
    },
    
    async fetchFromUnpkg() {
        const response = await fetch('https://unpkg.com/assemblyscript@latest/package.json');
        const data = await response.json();
        return data.version;
    },
    
    isValidStableVersion(version) {
        const semverRegex = /^(\d+)\.(\d+)\.(\d+)$/;
        if (!version.match(semverRegex)) return false;
        
        const preRelease = ['alpha', 'beta', 'rc', 'dev', '-'];
        return !preRelease.some(indicator => 
            version.toLowerCase().includes(indicator)
        );
    },
    
    timeout(ms) {
        return new Promise((_, reject) => 
            setTimeout(() => reject(new Error('Timeout')), ms)
        );
    }
};
```

### **ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ã®åˆ†æ**

AIã¯ä»¥ä¸‹ã®æ‰‹é †ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã‚’å‡¦ç†ã—ã¾ã™ï¼š

1. **ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ç‰¹å®š**
   ```
   - ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ç³»ï¼ˆCanvas/WebGLä½¿ç”¨ï¼‰ â†’ RenderModule
   - è¨ˆç®—å‡¦ç†ç³»ï¼ˆæ•°å€¤å‡ºåŠ›ï¼‰ â†’ ComputeModule  
   - ãƒ‡ãƒ¼ã‚¿å‡¦ç†ç³»ï¼ˆå¤‰æ›ãƒ»åˆ†æï¼‰ â†’ DataModule
   - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ç³»ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼‰ â†’ InteractiveModule
   ```

2. **AssemblyScriptã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆ/é¸æŠ**
   ```typescript
   // ä¾‹ï¼šç‰©ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆ
   export function update(dt: f32): void {
     // ç‰©ç†æ¼”ç®—ãƒ­ã‚¸ãƒƒã‚¯
   }
   ```

3. **é©åˆ‡ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—ã®æ±ºå®š**
   - å¿…è¦ãªWebAssemblyã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆé–¢æ•°
   - ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¦ä»¶ï¼ˆãƒ¡ãƒ¢ãƒªã€ç’°å¢ƒå¤‰æ•°ç­‰ï¼‰
   - å®Ÿè¡Œé »åº¦ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ— or ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ï¼‰

### **ã‚¹ãƒ†ãƒƒãƒ—2: AppModuleã®ç”Ÿæˆ**

é¸æŠã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«åŸºã¥ã„ã¦ã€AppModuleã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆã—ã¾ã™ï¼š

```javascript
const AppModule = {
    name: "ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å",
    sourceCode: `AssemblyScriptã‚³ãƒ¼ãƒ‰`,
    defaultOptions: { /* æœ€é©ãªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ */ },
    execute: (exports) => { /* å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ */ },
    render: (data) => { /* è¡¨ç¤ºæ›´æ–° */ }
};
```

### **ã‚¹ãƒ†ãƒƒãƒ—3: HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®çµ„ã¿ç«‹ã¦**

1. ã‚³ã‚¢æ§‹é€ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã¿
2. **å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—æ©Ÿèƒ½ã‚’çµ„ã¿è¾¼ã¿**
3. AppModuleã‚’åŸ‹ã‚è¾¼ã¿
4. å¿…è¦ã«å¿œã˜ã¦UIã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºéƒ¨åˆ†ã‚’è¿½åŠ 
5. å˜ä¸€HTMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›

---

## **ğŸš¨ å®Ÿè£…ãƒ«ãƒ¼ãƒ«ï¼ˆv1.4.0 ãƒ¡ãƒ¢ãƒªç®¡ç†æ”¹å–„ç‰ˆï¼‰**

### **ğŸ”´ çµ¶å¯¾ç¦æ­¢äº‹é …**

1. **ç›´æ¥importã®ä½¿ç”¨ç¦æ­¢**
   ```javascript
   // âŒ çµ¶å¯¾ã«ä½¿ç”¨ç¦æ­¢ï¼ˆå‹•ä½œã—ãªã„ï¼‰
   import("https://cdn.jsdelivr.net/npm/assemblyscript@latest/dist/asc/index.js");
   
   // âœ… å¿…ãšå…¬å¼äº’æ›ã®web.jsæ–¹å¼ã‚’ä½¿ç”¨
   loadScriptTag("https://cdn.jsdelivr.net/npm/assemblyscript@0.28.8/dist/web.js");
   await import("assemblyscript/asc");
   ```

2. **@latestã‚¿ã‚°ã®ä½¿ç”¨ç¦æ­¢**
   ```javascript
   // âŒ çµ¶å¯¾ã«ä½¿ç”¨ç¦æ­¢
   const url = "assemblyscript@latest/dist/web.js";
   
   // âœ… å¿…ãšå…·ä½“çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š
   const version = await VersionManager.getLatestVersion(); // å‹•çš„å–å¾—
   const url = `assemblyscript@${version}/dist/web.js`;
   ```

3. **å˜ä¸€CDNã¸ã®ä¾å­˜ç¦æ­¢**
   ```javascript
   // âŒ å˜ä¸€CDNã®ã¿ã¯ç¦æ­¢
   const url = "https://cdn.jsdelivr.net/...";
   
   // âœ… å¿…ãš2ã¤ã®CDNã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
   const cdnProviders = ['jsDelivr', 'UNPKG'];
   ```

### **ğŸŸ¡ å¿…é ˆãƒ«ãƒ¼ãƒ«ï¼ˆv1.4.0ï¼‰**

1. **å…¬å¼äº’æ›ã®web.jsæ–¹å¼ã®ä½¿ç”¨**
   - web.jsã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°ã‚’å‹•çš„ã«æŒ¿å…¥
   - import mapè¨­å®šã‚’å¾…æ©Ÿ
   - "assemblyscript/asc"ã‚’import

2. **2æ®µéšCDNãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**
   - ç¬¬1å„ªå…ˆ: jsDelivrï¼ˆé«˜é€Ÿãƒ»å…¬å¼æ¨å¥¨ï¼‰
   - ç¬¬2å„ªå…ˆ: UNPKGï¼ˆå®‰å®šãƒ»npmãƒŸãƒ©ãƒ¼ï¼‰

3. **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä¿è­·**
   - å„CDNè©¦è¡Œã«10ç§’ã®ä¸Šé™
   - ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

4. **import mapå¾…æ©Ÿå‡¦ç†**
   - ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®ç¢ºèª
   - æœ€å¤§2ç§’ã®å¾…æ©Ÿæ™‚é–“

5. **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¨˜éŒ²**
   - ä½¿ç”¨ã—ãŸCDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
   - èª­ã¿è¾¼ã¿æ™‚é–“
   - è©¦è¡Œå›æ•°
   - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—å…ƒ

### **ğŸŸ¢ æ¨å¥¨äº‹é …**

1. **ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®å‡ºåŠ›**
   - å„CDNè©¦è¡Œã®ãƒ­ã‚°
   - æˆåŠŸ/å¤±æ•—ã®è©³ç´°
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š

2. **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ˜ç¢ºåŒ–**
   - ã©ã®CDNãŒå¤±æ•—ã—ãŸã‹
   - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å•é¡Œã‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³å•é¡Œã‹

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**
   - ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®æ›´æ–°
   - ç¾åœ¨è©¦è¡Œä¸­ã®CDNè¡¨ç¤º

---

## **ğŸ“ AssemblyScriptã«ãŠã‘ã‚‹ãƒ¡ãƒ¢ãƒªç®¡ç†ã¨ãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆv1.4.0æ–°è¦ï¼‰**

### **åŸºæœ¬çš„ãªãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•**

AssemblyScriptã§ã¯ã€ãƒ¡ãƒ¢ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ãŒ2ã¤ã®ãƒ¬ãƒ™ãƒ«ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ï¼š

#### **1. é«˜ãƒ¬ãƒ™ãƒ«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆæ¨å¥¨ï¼‰**

TypedArrayã‚’ä½¿ç”¨ã—ãŸç®¡ç†ã•ã‚ŒãŸãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ï¼š

```typescript
// TypedArrayã®ä½¿ç”¨ï¼ˆå‹å®‰å…¨ã§ç›´æ„Ÿçš„ï¼‰
let buffer = new Uint8ClampedArray(1024);
buffer[0] = 255;  // è‡ªå‹•çš„ã«å¢ƒç•Œãƒã‚§ãƒƒã‚¯

// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ç‰ˆ
for (let i = 0; i < buffer.length; i++) {
    unchecked(buffer[i] = 128);  // å¢ƒç•Œãƒã‚§ãƒƒã‚¯çœç•¥
}
```

#### **2. ä½ãƒ¬ãƒ™ãƒ«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆé«˜é€Ÿï¼‰**

çµ„ã¿è¾¼ã¿é–¢æ•°ã«ã‚ˆã‚‹ç›´æ¥ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ï¼š

```typescript
// load/storeçµ„ã¿è¾¼ã¿é–¢æ•°
store<u8>(ptr, value);         // 1ãƒã‚¤ãƒˆæ›¸ãè¾¼ã¿
let value = load<u8>(ptr);     // 1ãƒã‚¤ãƒˆèª­ã¿è¾¼ã¿

// è¤‡æ•°ãƒã‚¤ãƒˆã®æ“ä½œ
store<i32>(ptr, 0x12345678);   // 4ãƒã‚¤ãƒˆæ›¸ãè¾¼ã¿
let int32 = load<i32>(ptr);    // 4ãƒã‚¤ãƒˆèª­ã¿è¾¼ã¿
```

### **ãƒ¡ãƒ¢ãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†**

#### **ç®¡ç†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ˜ãƒƒãƒ€ãƒ¼æ§‹é€ **

```
ã‚ªãƒ•ã‚»ãƒƒãƒˆ  | ã‚µã‚¤ã‚º | å†…å®¹
-----------|--------|------------------
-20        | usize  | ãƒ¡ãƒ¢ãƒªãƒãƒãƒ¼ã‚¸ãƒ£æƒ…å ±
-16        | usize  | GCæƒ…å ±1
-12        | usize  | GCæƒ…å ±2
-8         | u32    | ã‚¯ãƒ©ã‚¹ID (rtId)
-4         | u32    | ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚º (rtSize)
0          |        | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰é–‹å§‹ä½ç½®
```

#### **æ¨™æº–ãƒ‡ãƒ¼ã‚¿å‹ã®ãƒ¡ãƒ¢ãƒªé…ç½®**

| å‹ | ã‚¯ãƒ©ã‚¹ID | ç‰¹å¾´ |
|----|---------|------|
| ArrayBuffer | 1 | ç”Ÿã®ãƒã‚¤ãƒˆé…åˆ— |
| String | 2 | UTF-16æ–‡å­—åˆ—ï¼ˆJavaScriptã¨åŒã˜ï¼‰ |
| TypedArray | å‹•çš„ | buffer + dataStart + byteLength |
| StaticArray | - | å›ºå®šã‚µã‚¤ã‚ºã€ç›´æ¥ãƒ‡ãƒ¼ã‚¿æ ¼ç´ |

### **å®Ÿè·µçš„ãªãƒ¡ãƒ¢ãƒªç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³**

#### **ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ•ã‚¡ï¼ˆå†åˆ©ç”¨å¯èƒ½ï¼‰**

```typescript
// ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ•ã‚¡ã§é »ç¹ãªå†å‰²ã‚Šå½“ã¦ã‚’å›é¿
let globalBuffer: Uint8ClampedArray | null = null;

export function initBuffer(size: i32): void {
    globalBuffer = new Uint8ClampedArray(size);
}

export function getBufferPtr(): usize {
    return globalBuffer ? globalBuffer!.dataStart : 0;
}
```

#### **ãƒ‘ã‚¿ãƒ¼ãƒ³2: StaticArrayã®æ´»ç”¨ï¼ˆå›ºå®šã‚µã‚¤ã‚ºï¼‰**

```typescript
// StaticArrayã¯é–“æ¥å‚ç…§ãªã—ã€é«˜é€Ÿã‚¢ã‚¯ã‚»ã‚¹
let lookupTable = new StaticArray<f32>(256);

// åˆæœŸåŒ–
for (let i = 0; i < 256; i++) {
    unchecked(lookupTable[i] = <f32>i / 255.0);
}
```

#### **ãƒ‘ã‚¿ãƒ¼ãƒ³3: uncheckedã«ã‚ˆã‚‹æœ€é©åŒ–**

```typescript
// å®‰å…¨æ€§ãŒä¿è¨¼ã•ã‚Œã‚‹å ´åˆã®ã¿ä½¿ç”¨
export function processArray(arr: Int32Array): i32 {
    let sum = 0;
    // lengthãƒã‚§ãƒƒã‚¯ã‚’å¤–å´ã§è¡Œã†
    let len = arr.length;
    for (let i = 0; i < len; i++) {
        sum += unchecked(arr[i]);  // å¢ƒç•Œãƒã‚§ãƒƒã‚¯çœç•¥
    }
    return sum;
}
```

### **å‹å¤‰æ›ã®é‡è¦æ€§**

AssemblyScriptã¯æš—é»™çš„ãªå‹å¤‰æ›ã‚’è¨±å¯ã—ãªã„ãŸã‚ã€æ˜ç¤ºçš„ãªã‚­ãƒ£ã‚¹ãƒˆãŒå¿…é ˆã§ã™ï¼š

```typescript
// âŒ ã‚¨ãƒ©ãƒ¼ï¼šf64ã‹ã‚‰f32ã¸ã®æš—é»™çš„å¤‰æ›
let value: f32 = 3.14;

// âœ… æ­£ã—ã„ï¼šæ˜ç¤ºçš„ãªã‚­ãƒ£ã‚¹ãƒˆ
let value: f32 = <f32>3.14;

// âœ… ã‚ˆã‚Šæ˜ç¢ºï¼šf32ãƒªãƒ†ãƒ©ãƒ«ï¼ˆæ¨å¥¨ã•ã‚Œã‚‹å½¢å¼ã§ã¯ãªã„ãŒç†è§£ã—ã‚„ã™ã„ï¼‰
// æ³¨æ„: ç¾åœ¨ã®AssemblyScriptã§ã¯fã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯éæ¨å¥¨
let value: f32 = <f32>3.14;
```

### **ãƒ›ã‚¹ãƒˆã¨ã®ãƒ‡ãƒ¼ã‚¿äº¤æ›**

JavaScriptã¨WebAssemblyã®é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’äº¤æ›ã™ã‚‹éš›ã®æˆ¦ç•¥ï¼š

| ãƒ‡ãƒ¼ã‚¿å‹ | æˆ¦ç•¥ | èª¬æ˜ |
|---------|------|------|
| Number | å€¤æ¸¡ã— | è‡ªå‹•å¤‰æ› |
| TypedArray | ã‚³ãƒ”ãƒ¼ | ãƒ¡ãƒ¢ãƒªçµŒç”±ã§ã‚³ãƒ”ãƒ¼ |
| String | ã‚³ãƒ”ãƒ¼ | UTF-16ã¨ã—ã¦è»¢é€ |
| Objectï¼ˆå˜ç´”ï¼‰ | ã‚³ãƒ”ãƒ¼ | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¯ã«ã‚³ãƒ”ãƒ¼ |
| Objectï¼ˆè¤‡é›‘ï¼‰ | å‚ç…§ | ãƒã‚¤ãƒ³ã‚¿ã®ã¿æ¸¡ã™ |

### **ãƒ¡ãƒ¢ãƒªç®¡ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**

1. **TypedArrayã‚’å„ªå…ˆä½¿ç”¨** - å‹å®‰å…¨ã§ç®¡ç†ã•ã‚ŒãŸç’°å¢ƒ
2. **å¿…è¦ãªå ´åˆã®ã¿load/store** - ä½ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡ãŒå¿…è¦ãªå ´åˆ
3. **uncheckedã¯è¨ˆæ¸¬å¾Œã«é©ç”¨** - ã¾ãšå‹•ä½œç¢ºèªã€ãã®å¾Œæœ€é©åŒ–
4. **StaticArrayã§å›ºå®šã‚µã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿** - é–“æ¥å‚ç…§ã‚’é¿ã‘ã‚‹
5. **ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ•ã‚¡ã§å†åˆ©ç”¨** - GCè² è·ã‚’è»½æ¸›

---

### ğŸŸ  å‹å¤‰æ›ã«é–¢ã™ã‚‹é‡è¦æ³¨æ„äº‹é …

AssemblyScriptã¯**æš—é»™çš„ãªå‹å¤‰æ›ã‚’ä¸€åˆ‡è¨±å¯ã—ãªã„**å³æ ¼ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€JavaScriptã®`number`ã«ç›¸å½“ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æµ®å‹•å°æ•°ç‚¹å‹ã¯`f64`ã§ã‚ã‚‹ãŸã‚ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸Šã®ç†ç”±ã§`f32`ã‚’ä½¿ç”¨ã™ã‚‹éš›ã«ã¯ã€æ„è­˜çš„ãªå‹å¤‰æ›ãŒä¸å¯æ¬ ã§ã™ã€‚

#### 1. åŸºæœ¬ãƒ«ãƒ¼ãƒ«ï¼šæ˜ç¤ºçš„ãªå‹ã‚­ãƒ£ã‚¹ãƒˆã‚’æ¨å¥¨

**ç¾åœ¨ã®AssemblyScriptã§ã¯ã€`1.23f`ã®ã‚ˆã†ãª`f`ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹è¨˜æ³•ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“**ã€‚`f64`ã‹ã‚‰`f32`ã¸ã®å¤‰æ›ã¯ã€**`<f32>value`** ã¨ã„ã†æ˜ç¤ºçš„ãªå‹ã‚­ãƒ£ã‚¹ãƒˆã§è¡Œã†ã®ãŒæœ€ã‚‚å®‰å…¨ã§ç¢ºå®Ÿãªæ–¹æ³•ã§ã™ã€‚

| çŠ¶æ³ | å¯¾å‡¦æ³• | è¨˜æ³•ï¼ˆä¾‹ï¼‰ |
| :--- | :--- | :--- |
| **æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«** | **æ˜ç¤ºçš„ãªã‚­ãƒ£ã‚¹ãƒˆ**ã‚’æ¨å¥¨ã€‚ | `const gravity: f32 = <f32>9.8;` |
| **å¤‰æ•°ã¸ã®ä»£å…¥** | å‹æ¨è«–ãŒåŠ¹ãå ´åˆã‚‚ã‚ã‚‹ãŒã€ã‚­ãƒ£ã‚¹ãƒˆãŒå®‰å…¨ã€‚ | `let value: f32 = <f32>someF64Value;` |
| **`Math`é–¢æ•°** | æˆ»ã‚Šå€¤ã¯å¸¸ã«`f64`ã®ãŸã‚ã€**ã‚­ãƒ£ã‚¹ãƒˆãŒå¿…é ˆ**ã€‚ | `const sinValue: f32 = <f32>Math.sin(angle);` |
| **æ¼”ç®—** | æ¼”ç®—å­ã®ä¸¡è¾ºã®å‹ã‚’`f32`ã«çµ±ä¸€ã™ã‚‹ã€‚ | `const result: f32 = val1 * <f32>0.5;` |

#### 2. ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å³åº§ã®å¯¾å‡¦

* **`Type 'f64' is not assignable to type 'f32'`**
    â†’ `f64`ã®å€¤ã®å‰ã«**`<f32>`ã‚­ãƒ£ã‚¹ãƒˆã‚’è¿½åŠ **ã—ã¾ã™ã€‚ï¼ˆä¾‹ï¼š `<f32>Math.PI`ï¼‰

* **`Operator '*' cannot be applied to types 'f32' and 'f64'`**
    â†’ `f64`å´ã®å€¤ã«**`<f32>`ã‚­ãƒ£ã‚¹ãƒˆã‚’è¿½åŠ **ã—ã€ä¸¡è¾ºã®å‹ã‚’`f32`ã«çµ±ä¸€ã—ã¾ã™ã€‚

#### 3. å‹é¸æŠã®æŒ‡é‡ï¼ˆå¤‰æ›´ãªã—ï¼‰

**f32ã‚’ä½¿ç”¨ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å„ªå…ˆï¼‰**
* Canvas/WebGLæç”»
* ã‚²ãƒ¼ãƒ ç‰©ç†æ¼”ç®—
* ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†
* ãƒ¡ãƒ¢ãƒªåˆ¶ç´„ãŒã‚ã‚‹å ´åˆ

**f64ã‚’ä½¿ç”¨ï¼ˆç²¾åº¦å„ªå…ˆï¼‰**
* ç§‘å­¦è¨ˆç®—ãƒ»é‡‘èè¨ˆç®—
* ç´¯ç©èª¤å·®ãŒå•é¡Œã¨ãªã‚‹å ´åˆ
* JavaScriptã¨ã®äº’æ›æ€§é‡è¦–

#### 4. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‰ãƒã‚§ãƒƒã‚¯é …ç›®

* [ ] `f32`ã‚’æœŸå¾…ã™ã‚‹ç®‡æ‰€ã§ã€`f64`ã¨ãªã‚Šã†ã‚‹å€¤ï¼ˆæ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã€`Math.*`é–¢æ•°ã®æˆ»ã‚Šå€¤ãªã©ï¼‰ã«`<f32>`ã‚­ãƒ£ã‚¹ãƒˆãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
* [ ] ç•°ãªã‚‹æµ®å‹•å°æ•°ç‚¹å‹åŒå£«ã®æ¼”ç®—ãŒè¡Œã‚ã‚Œã¦ã„ãªã„ã‹ï¼Ÿ
* [ ] å®šæ•°å®šç¾©ã§å‹ã‚’æ˜ç¤ºã—ã¦ã„ã‚‹ã‹ï¼Ÿ (`const G: f32 = <f32>9.8`)

**é‡è¦**: AssemblyScriptã®æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`f64`ã§ã™ã€‚`f32`ã¨ã—ã¦æ‰±ã„ãŸã„å ´åˆã¯ã€å¿…ãšå‹ã‚’æ„è­˜ã—ãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒå¿…è¦ã§ã™ã€‚

---

## **ğŸ“„ å…¬å¼æ¨å¥¨æ–¹å¼äº’æ›ã«ã‚ˆã‚‹å®Ÿè£…ï¼ˆv1.3.1ï¼‰**

### **å®Ÿè£…ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ**

```
AssemblyScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ©èª­ã¿è¾¼ã¿é–‹å§‹
    â†“
ãƒãƒ¼ã‚¸ãƒ§ãƒ³å‹•çš„å–å¾—
    â”œâ”€ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª â†’ ã‚ã‚Œã°ä½¿ç”¨
    â””â”€ æ–°è¦å–å¾—
        â”œâ”€ jsDelivr API
        â”œâ”€ jsDelivr package.json
        â””â”€ UNPKG package.json
    â†“
CDNé¸æŠãƒ«ãƒ¼ãƒ—é–‹å§‹
    â†“
1. jsDelivrè©¦è¡Œ
    â”œâ”€ web.jsèª­ã¿è¾¼ã¿ â†’ import mapè¨­å®š â†’ asc import
    â”œâ”€ æˆåŠŸ â†’ ä½¿ç”¨é–‹å§‹
    â””â”€ å¤±æ•— â†’ æ¬¡ã®CDNã¸
    â†“
2. UNPKGè©¦è¡Œ
    â”œâ”€ web.jsèª­ã¿è¾¼ã¿ â†’ import mapè¨­å®š â†’ asc import
    â”œâ”€ æˆåŠŸ â†’ ä½¿ç”¨é–‹å§‹
    â””â”€ å¤±æ•— â†’ ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
```

### **CDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®šï¼ˆv1.3.1ï¼‰**

```javascript
const CDN_PROVIDERS = [
    {
        name: 'jsDelivr',
        baseUrl: 'https://cdn.jsdelivr.net/npm',
        characteristics: 'é«˜é€Ÿãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«æœ€é©åŒ–ãƒ»AssemblyScriptå…¬å¼æ¨å¥¨'
    },
    {
        name: 'UNPKG',
        baseUrl: 'https://unpkg.com',
        characteristics: 'npmå…¬å¼ãƒŸãƒ©ãƒ¼ãƒ»å®Œå…¨æ€§ä¿è¨¼ãƒ»å®‰å®šæ€§é‡è¦–'
    }
];
```

### **èª­ã¿è¾¼ã¿å‡¦ç†ã®è©³ç´°å®Ÿè£…**

```javascript
// CDNãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯¾å¿œãƒ­ãƒ¼ãƒ€ãƒ¼ï¼ˆv1.3.1ç°¡ç´ åŒ–ç‰ˆï¼‰
async function loadCompilerWithCDNFallback() {
    const version = await VersionManager.getLatestVersion();
    
    for (let i = 0; i < CDN_PROVIDERS.length; i++) {
        const cdn = CDN_PROVIDERS[i];
        const startTime = performance.now();
        
        try {
            updateProgress(30 + (i * 35), `ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©èª­ã¿è¾¼ã¿ä¸­ (${cdn.name})...`);
            
            // web.jsã®URLã‚’æ§‹ç¯‰
            const webJsUrl = `${cdn.baseUrl}/assemblyscript@${version}/dist/web.js`;
            console.log(`[Loader] Attempting ${cdn.name}: ${webJsUrl}`);
            
            // web.jsã‚’èª­ã¿è¾¼ã¿
            await loadScriptTag(webJsUrl);
            
            // import mapã®è¨­å®šã‚’å¾…æ©Ÿ
            await waitForImportMap();
            
            // assemblyscript/ascã‚’import
            const asc = await import("assemblyscript/asc");
            const compiler = asc.default || asc;
            
            // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®æ¤œè¨¼
            await validateCompiler(compiler);
            
            // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
            const loadTime = Math.round(performance.now() - startTime);
            COMPILER_METADATA.cdnProvider = cdn.name;
            COMPILER_METADATA.loadTime = loadTime;
            COMPILER_METADATA.attempts = i + 1;
            COMPILER_METADATA.versionSource = 'Dynamic fetch';
            
            console.log(`[Loader] Success with ${cdn.name} in ${loadTime}ms`);
            updateProgress(100, 'ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æº–å‚™å®Œäº†');
            
            return compiler;
            
        } catch (error) {
            console.error(`[Loader] ${cdn.name} failed:`, error.message);
            
            // ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
            cleanupFailedScripts();
        }
    }
    
    throw new Error(`All CDN providers failed for AssemblyScript ${version}`);
}

// ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°èª­ã¿è¾¼ã¿é–¢æ•°
function loadScriptTag(url) {
    return new Promise((resolve, reject) => {
        // æ—¢å­˜ã®AssemblyScriptãƒã‚§ãƒƒã‚¯
        if (window.ASSEMBLYSCRIPT_VERSION) {
            console.log('[Loader] AssemblyScript already loaded');
            resolve();
            return;
        }
        
        const script = document.createElement('script');
        script.src = url;
        script.dataset.assemblyScript = 'loading';
        
        // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šï¼ˆ10ç§’ï¼‰
        const timeout = setTimeout(() => {
            script.remove();
            reject(new Error(`Timeout loading: ${url}`));
        }, 10000);
        
        script.onload = () => {
            clearTimeout(timeout);
            script.dataset.assemblyScript = 'loaded';
            resolve();
        };
        
        script.onerror = () => {
            clearTimeout(timeout);
            script.remove();
            reject(new Error(`Failed to load: ${url}`));
        };
        
        document.head.appendChild(script);
    });
}

// import mapå¾…æ©Ÿé–¢æ•°
async function waitForImportMap() {
    const maxAttempts = 20;
    const waitTime = 100;
    
    for (let i = 0; i < maxAttempts; i++) {
        if (window.ASSEMBLYSCRIPT_VERSION && window.ASSEMBLYSCRIPT_IMPORTMAP) {
            console.log('[Loader] Import map ready');
            return;
        }
        await new Promise(resolve => setTimeout(resolve, waitTime));
    }
    
    throw new Error('Import map setup timeout');
}

// å¤±æ•—ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
function cleanupFailedScripts() {
    const scripts = document.querySelectorAll('script[data-assembly-script]');
    scripts.forEach(script => {
        if (script.dataset.assemblyScript !== 'loaded') {
            script.remove();
        }
    });
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚‚ã‚¯ãƒªã‚¢
    delete window.ASSEMBLYSCRIPT_VERSION;
    delete window.ASSEMBLYSCRIPT_IMPORTMAP;
}
```

---

## **ğŸ”§ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»•æ§˜**

### **åŸºæœ¬ã‚ªãƒ—ã‚·ãƒ§ãƒ³**

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|-----------|----------|------|
| `--optimize` | false | Binaryenæœ€é©åŒ–ã®æœ‰åŠ¹åŒ– |
| `--optimizeLevel` | 3 | æœ€é©åŒ–ãƒ¬ãƒ™ãƒ« (0-3) |
| `--shrinkLevel` | 0 | ã‚µã‚¤ã‚ºå‰Šæ¸›ãƒ¬ãƒ™ãƒ« (0-2) |
| `--runtime` | minimal | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ é¸æŠ (stub/minimal/incremental) |
| `--debug` | false | ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®ç”Ÿæˆ |
| `--sourceMap` | false | ã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—ç”Ÿæˆ |
| `--noAssert` | false | ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®ç„¡åŠ¹åŒ– |

### **é«˜åº¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³**

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ | ä½¿ç”¨ä¾‹ |
|-----------|------|--------|
| `--importMemory` | WebAssemblyãƒ¡ãƒ¢ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ | å…±æœ‰ãƒ¡ãƒ¢ãƒªä½¿ç”¨æ™‚ |
| `--sharedMemory` | SharedArrayBufferä½¿ç”¨ | ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç† |
| `--exportRuntime` | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ APIã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | é«˜åº¦ãªãƒ¡ãƒ¢ãƒªç®¡ç† |
| `--explicitStart` | _starté–¢æ•°ã®æ˜ç¤ºçš„å‘¼ã³å‡ºã— | åˆæœŸåŒ–åˆ¶å¾¡ |
| `--lowMemoryLimit` | ä½ãƒ¡ãƒ¢ãƒªç’°å¢ƒå‘ã‘æœ€é©åŒ– | çµ„ã¿è¾¼ã¿ãƒ–ãƒ©ã‚¦ã‚¶ |

### **ãƒ—ãƒªã‚»ãƒƒãƒˆå®šç¾©**

```javascript
const PRESETS = {
    simple: {
        optimize: false,
        runtime: 'minimal'
    },
    debug: {
        optimize: false,
        optimizeLevel: '0',
        debug: true,
        sourceMap: true,
        measure: true
    },
    release: {
        optimize: true,
        optimizeLevel: '3',
        shrinkLevel: '1',
        noAssert: true
    },
    minimal: {
        optimize: true,
        optimizeLevel: '3',
        shrinkLevel: '2',
        runtime: 'stub',
        noAssert: true
    }
};
```

---

## **ğŸ“¦ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**

### **Layer 1: ã‚³ã‚¢ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆv1.3.1 å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¯¾å¿œç‰ˆï¼‰**

```javascript
// ============================================
// ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
// ============================================
const COMPILER_METADATA = {
    version: null,          // å‹•çš„å–å¾—
    versionSource: null,    // å–å¾—å…ƒï¼ˆDynamic/Fallbackï¼‰
    fetchedFrom: "NPM Registry via CDN",
    generatedAt: new Date().toISOString(),
    cdnProvider: null,      // æˆåŠŸã—ãŸCDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
    loadTime: null,         // èª­ã¿è¾¼ã¿æ™‚é–“ï¼ˆmsï¼‰
    attempts: 0,            // è©¦è¡Œå›æ•°
    
    async initialize() {
        const startTime = performance.now();
        try {
            this.version = await VersionManager.getLatestVersion();
            this.versionSource = 'Dynamic fetch';
            console.log(`[Version] Fetched: v${this.version}`);
        } catch (error) {
            this.version = "0.28.8";
            this.versionSource = 'Hardcoded fallback';
            console.warn('[Version] Using fallback version');
        }
        const fetchTime = Math.round(performance.now() - startTime);
        console.log(`[Version] Time: ${fetchTime}ms`);
    }
};

// ============================================
// CDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å®šç¾©ï¼ˆv1.3.1ç°¡ç´ åŒ–ç‰ˆï¼‰
// ============================================
const CDN_PROVIDERS = [
    {
        name: 'jsDelivr',
        baseUrl: 'https://cdn.jsdelivr.net/npm',
        timeout: 10000,
        priority: 1
    },
    {
        name: 'UNPKG',
        baseUrl: 'https://unpkg.com',
        timeout: 10000,
        priority: 2
    }
];

// ============================================
// ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆv1.3.1æ–°è¦ï¼‰
// ============================================
const VersionManager = {
    // å®Ÿè£…ã¯ä¸Šè¨˜ã‚¹ãƒ†ãƒƒãƒ—0.5ã‚’å‚ç…§
};

// ============================================
// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ­ãƒ¼ãƒ€ãƒ¼ï¼ˆå…¬å¼äº’æ›æ–¹å¼çµ±ä¸€ç‰ˆï¼‰
// ============================================
const CompilerLoader = {
    compiler: null,
    
    async load() {
        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‹•çš„å–å¾—
        await COMPILER_METADATA.initialize();
        
        // CDNãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ãƒ­ãƒ¼ãƒ‰
        return await loadCompilerWithCDNFallback();
    }
};

// ============================================
// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚³ã‚¢
// ============================================
const CompilerCore = {
    compiler: null,
    
    init(ascInstance) {
        this.compiler = ascInstance;
        return true;
    },
    
    async compile(sourceCode, options) {
        if (!this.compiler) {
            throw new Error('Compiler not initialized');
        }
        
        const compileOptions = this.buildOptions(options);
        let wasmBinary = null;
        let compileStats = '';
        
        const { error, stdout, stderr } = await this.compiler.main(compileOptions, {
            readFile: (filename) => {
                if (filename === "main.ts") return sourceCode;
                return null;
            },
            writeFile: (filename, contents) => {
                if (filename === "main.wasm") {
                    wasmBinary = contents;
                }
            },
            listFiles: () => ["main.ts"]
        });
        
        if (error) throw new Error(stderr || error.toString());
        if (!wasmBinary) throw new Error('No WebAssembly binary generated');
        
        if (stdout) compileStats = stdout;
        
        return { wasmBinary, stats: compileStats };
    },
    
    buildOptions(userOptions) {
        const flags = ["main.ts", "-o", "main.wasm"];
        
        Object.entries(userOptions).forEach(([key, value]) => {
            if (typeof value === 'boolean' && value) {
                flags.push(`--${key}`);
            } else if (typeof value !== 'boolean' && value !== '') {
                flags.push(`--${key}`, value.toString());
            }
        });
        
        return flags;
    }
};

// ============================================
// ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
// ============================================
const OptionsManager = {
    current: {},
    
    init() {
        this.current = { runtime: 'minimal' };
        this.loadFromStorage();
        this.updateUI();
    },
    
    apply(preset) {
        if (PRESETS[preset]) {
            this.current = { ...PRESETS[preset] };
            this.updateUI();
            this.saveToStorage();
        }
    },
    
    collectFromUI() {
        const options = {};
        
        // Boolean options
        ['optimize', 'exportRuntime', 'noAssert', 'debug', 'sourceMap',
         'measure', 'validate', 'importMemory', 'sharedMemory',
         'exportTable', 'explicitStart', 'lowMemoryLimit'].forEach(opt => {
            const el = document.getElementById(`opt-${opt}`);
            if (el && el.checked) options[opt] = true;
        });
        
        // Select options
        ['optimizeLevel', 'shrinkLevel', 'runtime'].forEach(opt => {
            const el = document.getElementById(`opt-${opt}`);
            if (el && el.value) options[opt] = el.value;
        });
        
        this.current = options;
        this.saveToStorage();
        return options;
    },
    
    updateUI() {
        Object.keys(this.current).forEach(key => {
            const el = document.getElementById(`opt-${key}`);
            if (el) {
                if (el.type === 'checkbox') {
                    el.checked = this.current[key] === true;
                } else {
                    el.value = this.current[key] || '';
                }
            }
        });
    },
    
    saveToStorage() {
        try {
            localStorage.setItem('asmOptions', JSON.stringify(this.current));
        } catch(e) {}
    },
    
    loadFromStorage() {
        try {
            const saved = localStorage.getItem('asmOptions');
            if (saved) this.current = JSON.parse(saved);
        } catch(e) {}
    }
};

// ============================================
// WebAssemblyå®Ÿè¡Œç®¡ç†
// ============================================
const WasmRunner = {
    instance: null,
    
    async instantiate(wasmBinary, imports = {}) {
        const defaultImports = {
            env: {
                abort: (msg, file, line, column) => {
                    console.error(`Abort: ${msg} at ${file}:${line}:${column}`);
                },
                trace: (msg, n, ...args) => {
                    console.log(`Trace: ${msg}`, ...args);
                },
                seed: () => Date.now(),
                memory: new WebAssembly.Memory({ initial: 1 })
            },
            Math: Math,
            Date: Date
        };
        
        const mergedImports = this.mergeImports(defaultImports, imports);
        
        let buffer;
        if (wasmBinary instanceof ArrayBuffer) {
            buffer = wasmBinary;
        } else if (wasmBinary instanceof Uint8Array) {
            buffer = wasmBinary.buffer.slice(wasmBinary.byteOffset, 
                                             wasmBinary.byteOffset + wasmBinary.byteLength);
        } else {
            throw new Error('Unexpected binary format');
        }
        
        const wasmModule = await WebAssembly.compile(buffer);
        this.instance = await WebAssembly.instantiate(wasmModule, mergedImports);
        
        return this.instance.exports;
    },
    
    mergeImports(defaults, custom) {
        const merged = { ...defaults };
        Object.keys(custom).forEach(key => {
            if (typeof custom[key] === 'object' && !Array.isArray(custom[key])) {
                merged[key] = { ...defaults[key], ...custom[key] };
            } else {
                merged[key] = custom[key];
            }
        });
        return merged;
    }
};

// ============================================
// ãƒ—ãƒªã‚»ãƒƒãƒˆå®šç¾©
// ============================================
const PRESETS = {
    simple: {
        optimize: false,
        runtime: 'minimal'
    },
    debug: {
        optimize: false,
        optimizeLevel: '0',
        debug: true,
        sourceMap: true,
        measure: true
    },
    release: {
        optimize: true,
        optimizeLevel: '3',
        shrinkLevel: '1',
        noAssert: true
    },
    minimal: {
        optimize: true,
        optimizeLevel: '3',
        shrinkLevel: '2',
        runtime: 'stub',
        noAssert: true
    }
};
```

### **Layer 2: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºé ˜åŸŸï¼‰**

```javascript
// AIãŒç”Ÿæˆã™ã‚‹éƒ¨åˆ†ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
const AppModule = {
    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è­˜åˆ¥æƒ…å ±
    name: "UserDefinedApp",
    description: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³",
    
    // AssemblyScriptã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
    sourceCode: `
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã«åŸºã¥ã„ã¦AIãŒç”Ÿæˆ
        export function main(): void {
            // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
        }
    `,
    
    // æ¨å¥¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³
    defaultOptions: {
        optimize: false,
        runtime: 'minimal'
    },
    
    // WebAssemblyã‚¤ãƒ³ãƒãƒ¼ãƒˆå®šç¾©
    getImports() {
        return {
            // å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        };
    },
    
    // åˆæœŸåŒ–å‡¦ç†
    async init(wasmExports) {
        // åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯
    },
    
    // ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—å®Ÿè¡Œ
    execute(wasmExports, deltaTime) {
        // ãƒ•ãƒ¬ãƒ¼ãƒ æ¯ã®å‡¦ç†
    },
    
    // UIæ›´æ–°
    render(data) {
        // æç”»ãƒ»è¡¨ç¤ºæ›´æ–°
    },
    
    // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    cleanup() {
        // ãƒªã‚½ãƒ¼ã‚¹è§£æ”¾
    }
};
```

---

## **ğŸ“ HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆv1.4.0ï¼‰**

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AssemblyScript WebAssembly Compiler</title>
    <style>
        /* ============================================
           ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
        ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #48bb78;
            --error-color: #f56565;
            --warning-color: #ed8936;
            --bg-primary: #1a202c;
            --bg-secondary: #2d3748;
            --bg-tertiary: #4a5568;
            --text-primary: #e2e8f0;
            --text-secondary: #a0aec0;
            --border-color: #4a5568;
            --code-bg: #2d3748;
            --sidebar-width: 320px;
            --header-height: 60px;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ============================================
           ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ 
        ============================================ */
        .app-container {
            display: flex;
            min-height: 100vh;
            background: var(--bg-primary);
        }
        
        /* ============================================
           ã‚µã‚¤ãƒ‰ãƒãƒ¼
        ============================================ */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            position: fixed;
            height: 100vh;
            z-index: 1000;
            overflow-y: auto;
        }
        
        .sidebar.closed {
            transform: translateX(calc(-1 * var(--sidebar-width)));
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        /* ============================================
           ã‚¿ãƒ–ã‚·ã‚¹ãƒ†ãƒ 
        ============================================ */
        .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-tertiary);
        }
        
        .tab-button {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        
        .tab-button.active {
            color: var(--primary-color);
            background: var(--bg-secondary);
            border-bottom: 2px solid var(--primary-color);
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ============================================
           ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³
        ============================================ */
        .option-section {
            margin-bottom: 24px;
        }
        
        .option-section-title {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }
        
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .option-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background: var(--bg-tertiary);
            border-radius: 6px;
            transition: background 0.2s;
        }
        
        .option-item:hover {
            background: rgba(102, 126, 234, 0.1);
        }
        
        .option-item input[type="checkbox"] {
            margin-right: 10px;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        .option-item label {
            flex: 1;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .option-item select {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        /* ============================================
           ãƒ—ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
        ============================================ */
        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .preset-button {
            padding: 10px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        
        .preset-button:hover {
            background: var(--primary-color);
            transform: translateY(-1px);
        }
        
        /* ============================================
           ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
        ============================================ */
        .main-content {
            flex: 1;
            margin-left: 0;
            display: flex;
            flex-direction: column;
            transition: margin-left 0.3s ease;
        }
        
        .main-content.sidebar-open {
            margin-left: var(--sidebar-width);
        }
        
        /* ============================================
           ãƒ˜ãƒƒãƒ€ãƒ¼
        ============================================ */
        .header {
            height: var(--header-height);
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
        }
        
        .hamburger-menu {
            width: 30px;
            height: 24px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .hamburger-line {
            width: 100%;
            height: 3px;
            background: var(--text-primary);
            border-radius: 2px;
            transition: all 0.3s;
        }
        
        .header-title {
            font-size: 1.5rem;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .action-button {
            padding: 8px 16px;
            background: var(--primary-color);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .action-button:hover {
            background: var(--secondary-color);
            transform: translateY(-1px);
        }
        
        .action-button.secondary {
            background: var(--bg-tertiary);
        }
        
        /* ============================================
           ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢
        ============================================ */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }
        
        /* ============================================
           ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã¨ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ
        ============================================ */
        .workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            flex: 1;
            min-height: 0;
        }
        
        .workspace-panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .panel-header {
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            font-weight: 500;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .panel-content {
            flex: 1;
            padding: 16px;
            overflow: auto;
        }
        
        /* ============================================
           ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼
        ============================================ */
        #code-editor {
            width: 100%;
            height: 100%;
            min-height: 400px;
            background: var(--code-bg);
            color: var(--text-primary);
            border: none;
            outline: none;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            padding: 16px;
            resize: none;
        }
        
        /* ============================================
           ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ
        ============================================ */
        #app-viewport {
            background: #f8f9fa;
            border-radius: 4px;
            padding: 20px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #2d3748;
        }
        
        /* ============================================
           çµ±è¨ˆæƒ…å ±ãƒ‘ãƒãƒ«
        ============================================ */
        .stats-panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            margin-top: 20px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .stat-item {
            background: var(--bg-tertiary);
            padding: 12px;
            border-radius: 6px;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        /* ============================================
           ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
        ============================================ */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--bg-secondary);
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .progress-container.active {
            opacity: 1;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
        
        /* ============================================
           ã‚¨ãƒ©ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
        ============================================ */
        .error-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }
        
        .error-overlay.active {
            display: flex;
        }
        
        .error-content {
            background: var(--bg-secondary);
            border: 2px solid var(--error-color);
            border-radius: 8px;
            padding: 24px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .error-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            color: var(--error-color);
        }
        
        .error-icon {
            font-size: 24px;
            margin-right: 12px;
        }
        
        .error-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .error-message {
            background: var(--code-bg);
            padding: 16px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 16px;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .error-close {
            padding: 8px 16px;
            background: var(--error-color);
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        /* ============================================
           ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        ============================================ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .loading {
            animation: pulse 1.5s infinite;
        }
        
        /* ============================================
           ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
        ============================================ */
        @media (max-width: 1024px) {
            .workspace {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            :root {
                --sidebar-width: 280px;
            }
            
            .preset-buttons {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* ============================================
           ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æƒ…å ±ãƒ‘ãƒãƒ«
        ============================================ */
        .compiler-info {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 20px;
            font-size: 0.85rem;
        }
        
        .compiler-info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        
        .compiler-info-row:last-child {
            margin-bottom: 0;
        }
        
        .compiler-info-label {
            color: var(--text-secondary);
        }
        
        .compiler-info-value {
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .cdn-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .cdn-badge.jsdelivr {
            background: #e84d39;
            color: white;
        }
        
        .cdn-badge.unpkg {
            background: #2196f3;
            color: white;
        }
        
        /* ============================================
           ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹
        ============================================ */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-2 { margin-bottom: 8px; }
        .mb-3 { margin-bottom: 12px; }
        .mb-4 { margin-bottom: 16px; }
    </style>
</head>
<body>
    <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
    <div id="progress-container" class="progress-container">
        <div id="progress-bar" class="progress-bar" style="width: 0%"></div>
    </div>
    
    <!-- ã‚¨ãƒ©ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div id="error-overlay" class="error-overlay">
        <div class="error-content">
            <div class="error-header">
                <span class="error-icon">âš ï¸</span>
                <h3 class="error-title">ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼</h3>
            </div>
            <pre id="error-message" class="error-message"></pre>
            <button class="error-close" onclick="hideError()">é–‰ã˜ã‚‹</button>
        </div>
    </div>
    
    <!-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div class="app-container">
        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">âš¡ WebAssembly</h2>
                <span style="cursor: pointer;" onclick="toggleSidebar()">âœ•</span>
            </div>
            
            <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="tab-navigation">
                <button class="tab-button active" onclick="switchTab('app')">ã‚¢ãƒ—ãƒªè¨­å®š</button>
                <button class="tab-button" onclick="switchTab('wasm')">WASMè¨­å®š</button>
            </div>
            
            <!-- ã‚¢ãƒ—ãƒªè¨­å®šã‚¿ãƒ– -->
            <div id="app-tab" class="tab-content active">
                <div class="option-section">
                    <h3 class="option-section-title">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š</h3>
                    <div class="option-group">
                        <div class="option-item">
                            <input type="checkbox" id="auto-compile" checked>
                            <label for="auto-compile">è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="show-stats" checked>
                            <label for="show-stats">çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤º</label>
                        </div>
                    </div>
                </div>
                
                <!-- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æƒ…å ±ï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰æ™‚ã®ã¿è¡¨ç¤ºï¼‰ -->
                <div id="compiler-info" class="compiler-info hidden">
                    <div class="compiler-info-row">
                        <span class="compiler-info-label">ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</span>
                        <span id="compiler-version" class="compiler-info-value">-</span>
                    </div>
                    <div class="compiler-info-row">
                        <span class="compiler-info-label">å–å¾—å…ƒ:</span>
                        <span id="version-source" class="compiler-info-value">-</span>
                    </div>
                    <div class="compiler-info-row">
                        <span class="compiler-info-label">CDN:</span>
                        <span id="cdn-provider" class="compiler-info-value">-</span>
                    </div>
                    <div class="compiler-info-row">
                        <span class="compiler-info-label">èª­ã¿è¾¼ã¿æ™‚é–“:</span>
                        <span id="load-time" class="compiler-info-value">-</span>
                    </div>
                </div>
            </div>
            
            <!-- WebAssemblyè¨­å®šã‚¿ãƒ– -->
            <div id="wasm-tab" class="tab-content">
                <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆ -->
                <div class="option-section">
                    <h3 class="option-section-title">ãƒ—ãƒªã‚»ãƒƒãƒˆ</h3>
                    <div class="preset-buttons">
                        <button class="preset-button" onclick="applyPreset('simple')">ã‚·ãƒ³ãƒ—ãƒ«</button>
                        <button class="preset-button" onclick="applyPreset('debug')">ãƒ‡ãƒãƒƒã‚°</button>
                        <button class="preset-button" onclick="applyPreset('release')">ãƒªãƒªãƒ¼ã‚¹</button>
                        <button class="preset-button" onclick="applyPreset('minimal')">æœ€å°ã‚µã‚¤ã‚º</button>
                    </div>
                </div>
                
                <!-- æœ€é©åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                <div class="option-section">
                    <h3 class="option-section-title">æœ€é©åŒ–</h3>
                    <div class="option-group">
                        <div class="option-item">
                            <input type="checkbox" id="opt-optimize">
                            <label for="opt-optimize">æœ€é©åŒ–ã‚’æœ‰åŠ¹åŒ–</label>
                        </div>
                        <div class="option-item">
                            <label for="opt-optimizeLevel">æœ€é©åŒ–ãƒ¬ãƒ™ãƒ«:</label>
                            <select id="opt-optimizeLevel">
                                <option value="">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</option>
                                <option value="0">0 (ãªã—)</option>
                                <option value="1">1 (åŸºæœ¬)</option>
                                <option value="2">2 (æ¨™æº–)</option>
                                <option value="3">3 (æœ€å¤§)</option>
                            </select>
                        </div>
                        <div class="option-item">
                            <label for="opt-shrinkLevel">ç¸®å°ãƒ¬ãƒ™ãƒ«:</label>
                            <select id="opt-shrinkLevel">
                                <option value="">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</option>
                                <option value="0">0 (ãªã—)</option>
                                <option value="1">1 (æ¨™æº–)</option>
                                <option value="2">2 (æœ€å¤§)</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- ãƒ‡ãƒãƒƒã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                <div class="option-section">
                    <h3 class="option-section-title">ãƒ‡ãƒãƒƒã‚°</h3>
                    <div class="option-group">
                        <div class="option-item">
                            <input type="checkbox" id="opt-debug">
                            <label for="opt-debug">ãƒ‡ãƒãƒƒã‚°æƒ…å ±</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-sourceMap">
                            <label for="opt-sourceMap">ã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-measure">
                            <label for="opt-measure">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-validate">
                            <label for="opt-validate">ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</label>
                        </div>
                    </div>
                </div>
                
                <!-- ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                <div class="option-section">
                    <h3 class="option-section-title">ãƒ©ãƒ³ã‚¿ã‚¤ãƒ </h3>
                    <div class="option-group">
                        <div class="option-item">
                            <label for="opt-runtime">ãƒ©ãƒ³ã‚¿ã‚¤ãƒ :</label>
                            <select id="opt-runtime">
                                <option value="">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</option>
                                <option value="stub">Stub (æœ€å°)</option>
                                <option value="minimal" selected>Minimal (åŸºæœ¬)</option>
                                <option value="incremental">Incremental (GC)</option>
                            </select>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-exportRuntime">
                            <label for="opt-exportRuntime">ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-noAssert">
                            <label for="opt-noAssert">ã‚¢ã‚µãƒ¼ãƒˆç„¡åŠ¹åŒ–</label>
                        </div>
                    </div>
                </div>
                
                <!-- é«˜åº¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                <div class="option-section">
                    <h3 class="option-section-title">é«˜åº¦ãªè¨­å®š</h3>
                    <div class="option-group">
                        <div class="option-item">
                            <input type="checkbox" id="opt-importMemory">
                            <label for="opt-importMemory">ãƒ¡ãƒ¢ãƒªã‚¤ãƒ³ãƒãƒ¼ãƒˆ</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-sharedMemory">
                            <label for="opt-sharedMemory">å…±æœ‰ãƒ¡ãƒ¢ãƒª</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-exportTable">
                            <label for="opt-exportTable">ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-explicitStart">
                            <label for="opt-explicitStart">æ˜ç¤ºçš„ã‚¹ã‚¿ãƒ¼ãƒˆ</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="opt-lowMemoryLimit">
                            <label for="opt-lowMemoryLimit">ä½ãƒ¡ãƒ¢ãƒªåˆ¶é™</label>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        
        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <main id="main-content" class="main-content sidebar-open">
            <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <header class="header">
                <div class="hamburger-menu" onclick="toggleSidebar()">
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                </div>
                
                <h1 class="header-title">AssemblyScript Compiler</h1>
                
                <div class="header-actions">
                    <button class="action-button secondary" onclick="resetApp()">
                        ğŸ”„ ãƒªã‚»ãƒƒãƒˆ
                    </button>
                    <button class="action-button" onclick="compile()">
                        âš¡ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
                    </button>
                </div>
            </header>
            
            <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
            <div class="content-area">
                <!-- ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ -->
                <div class="workspace">
                    <!-- ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ -->
                    <div class="workspace-panel">
                        <div class="panel-header">
                            <span>ğŸ“ AssemblyScript ã‚³ãƒ¼ãƒ‰</span>
                            <span id="compile-status"></span>
                        </div>
                        <div class="panel-content">
                            <textarea id="code-editor" spellcheck="false"></textarea>
                        </div>
                    </div>
                    
                    <!-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ -->
                    <div class="workspace-panel">
                        <div class="panel-header">
                            <span>ğŸš€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</span>
                        </div>
                        <div class="panel-content">
                            <div id="app-viewport">
                                <p class="loading">åˆæœŸåŒ–ä¸­...</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- çµ±è¨ˆæƒ…å ±ãƒ‘ãƒãƒ« -->
                <div id="stats-panel" class="stats-panel">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-label">ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚é–“</div>
                            <div class="stat-value" id="stat-compile-time">-</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">WASMã‚µã‚¤ã‚º</div>
                            <div class="stat-value" id="stat-wasm-size">-</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">å®Ÿè¡Œå›æ•°</div>
                            <div class="stat-value" id="stat-exec-count">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>
                            <div class="stat-value" id="stat-status">å¾…æ©Ÿä¸­</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script type="module">
        // ============================================
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
        // ============================================
        const AppModule = {
            name: "Counter Demo",
            description: "ã‚·ãƒ³ãƒ—ãƒ«ãªã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³",
            
            sourceCode: `
// ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
let counter: i32 = 0;

// ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å¢—ã‚„ã™
export function increment(): i32 {
    counter++;
    return counter;
}

// ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’æ¸›ã‚‰ã™
export function decrement(): i32 {
    counter--;
    return counter;
}

// ç¾åœ¨ã®å€¤ã‚’å–å¾—
export function getValue(): i32 {
    return counter;
}

// ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
export function reset(): void {
    counter = 0;
}

// ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã‚’å–å¾—ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
export function getMemorySize(): i32 {
    return memory.size();
}
            `.trim(),
            
            defaultOptions: {
                optimize: false,
                runtime: 'minimal'
            },
            
            async init(wasmExports) {
                const viewport = document.getElementById('app-viewport');
                viewport.innerHTML = `
                    <div style="text-align: center;">
                        <h2 style="margin-bottom: 20px;">ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãƒ‡ãƒ¢</h2>
                        <div style="font-size: 48px; font-weight: bold; margin: 20px 0;" id="counter-value">0</div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button onclick="window.counterOp('increment')" style="padding: 10px 20px; font-size: 18px; cursor: pointer;">â• å¢—åŠ </button>
                            <button onclick="window.counterOp('decrement')" style="padding: 10px 20px; font-size: 18px; cursor: pointer;">â– æ¸›å°‘</button>
                            <button onclick="window.counterOp('reset')" style="padding: 10px 20px; font-size: 18px; cursor: pointer;">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
                        </div>
                        <div style="margin-top: 20px; font-size: 14px; color: #666;">
                            ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚º: <span id="memory-size">0</span> ãƒšãƒ¼ã‚¸
                        </div>
                    </div>
                `;
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦ç™»éŒ²
                window.counterOp = (op) => {
                    let value;
                    switch(op) {
                        case 'increment':
                            value = wasmExports.increment();
                            break;
                        case 'decrement':
                            value = wasmExports.decrement();
                            break;
                        case 'reset':
                            wasmExports.reset();
                            value = 0;
                            break;
                    }
                    document.getElementById('counter-value').textContent = value;
                    document.getElementById('memory-size').textContent = wasmExports.getMemorySize();
                    
                    // å®Ÿè¡Œå›æ•°ã‚’æ›´æ–°
                    const execCount = parseInt(document.getElementById('stat-exec-count').textContent) + 1;
                    document.getElementById('stat-exec-count').textContent = execCount;
                };
                
                // åˆæœŸãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã‚’è¡¨ç¤º
                document.getElementById('memory-size').textContent = wasmExports.getMemorySize();
            }
        };
        
        // ============================================
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        // ============================================
        let wasmExports = null;
        let compilerReady = false;
        
        // ============================================
        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
        // ============================================
        const COMPILER_METADATA = {
            version: null,
            versionSource: null,
            fetchedFrom: "NPM Registry via CDN",
            generatedAt: new Date().toISOString(),
            cdnProvider: null,
            loadTime: null,
            attempts: 0,
            
            async initialize() {
                const startTime = performance.now();
                try {
                    this.version = await VersionManager.getLatestVersion();
                    this.versionSource = 'Dynamic fetch';
                    console.log(`[Version] Fetched: v${this.version}`);
                } catch (error) {
                    this.version = "0.28.8";
                    this.versionSource = 'Hardcoded fallback';
                    console.warn('[Version] Using fallback version');
                }
                const fetchTime = Math.round(performance.now() - startTime);
                console.log(`[Version] Time: ${fetchTime}ms`);
            }
        };
        
        // ============================================
        // CDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å®šç¾©
        // ============================================
        const CDN_PROVIDERS = [
            {
                name: 'jsDelivr',
                baseUrl: 'https://cdn.jsdelivr.net/npm',
                timeout: 10000,
                priority: 1
            },
            {
                name: 'UNPKG',
                baseUrl: 'https://unpkg.com',
                timeout: 10000,
                priority: 2
            }
        ];
        
        // ============================================
        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
        // ============================================
        const VersionManager = {
            cache: {
                get() {
                    try {
                        const cached = sessionStorage.getItem('asc_version_cache');
                        if (cached) {
                            const data = JSON.parse(cached);
                            if (Date.now() - data.timestamp < 3600000) {
                                return data.version;
                            }
                        }
                    } catch (e) {}
                    return null;
                },
                set(version) {
                    try {
                        sessionStorage.setItem('asc_version_cache', JSON.stringify({
                            version,
                            timestamp: Date.now()
                        }));
                    } catch (e) {}
                }
            },
            
            async getLatestVersion() {
                const cached = this.cache.get();
                if (cached) {
                    console.log(`[Version] Using cached: ${cached}`);
                    return cached;
                }
                
                const strategies = [
                    { name: 'jsDelivr API', fn: () => this.fetchFromJsDelivr() },
                    { name: 'jsDelivr Package', fn: () => this.fetchJsDelivrPackageJson() },
                    { name: 'Unpkg', fn: () => this.fetchFromUnpkg() }
                ];
                
                for (const strategy of strategies) {
                    try {
                        console.log(`[Version] Trying ${strategy.name}...`);
                        const version = await Promise.race([
                            strategy.fn(),
                            this.timeout(3000)
                        ]);
                        
                        if (version && this.isValidStableVersion(version)) {
                            console.log(`[Version] Success: ${version}`);
                            this.cache.set(version);
                            return version;
                        }
                    } catch (e) {
                        console.warn(`[Version] ${strategy.name} failed`);
                    }
                }
                
                return "0.28.8";
            },
            
            async fetchFromJsDelivr() {
                const response = await fetch('https://data.jsdelivr.com/v1/package/npm/assemblyscript');
                const data = await response.json();
                const stable = data.versions.filter(v => this.isValidStableVersion(v));
                return stable[0];
            },
            
            async fetchJsDelivrPackageJson() {
                const response = await fetch('https://cdn.jsdelivr.net/npm/assemblyscript@latest/package.json');
                const data = await response.json();
                return data.version;
            },
            
            async fetchFromUnpkg() {
                const response = await fetch('https://unpkg.com/assemblyscript@latest/package.json');
                const data = await response.json();
                return data.version;
            },
            
            isValidStableVersion(version) {
                const semverRegex = /^(\d+)\.(\d+)\.(\d+)$/;
                if (!version.match(semverRegex)) return false;
                
                const preRelease = ['alpha', 'beta', 'rc', 'dev', '-'];
                return !preRelease.some(indicator => 
                    version.toLowerCase().includes(indicator)
                );
            },
            
            timeout(ms) {
                return new Promise((_, reject) => 
                    setTimeout(() => reject(new Error('Timeout')), ms)
                );
            }
        };
        
        // ============================================
        // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ­ãƒ¼ãƒ€ãƒ¼
        // ============================================
        const CompilerLoader = {
            compiler: null,
            
            async load() {
                await COMPILER_METADATA.initialize();
                return await loadCompilerWithCDNFallback();
            }
        };
        
        // CDNãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯¾å¿œãƒ­ãƒ¼ãƒ€ãƒ¼
        async function loadCompilerWithCDNFallback() {
            const version = COMPILER_METADATA.version;
            
            for (let i = 0; i < CDN_PROVIDERS.length; i++) {
                const cdn = CDN_PROVIDERS[i];
                const startTime = performance.now();
                
                try {
                    updateProgress(30 + (i * 35), `ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©èª­ã¿è¾¼ã¿ä¸­ (${cdn.name})...`);
                    
                    const webJsUrl = `${cdn.baseUrl}/assemblyscript@${version}/dist/web.js`;
                    console.log(`[Loader] Attempting ${cdn.name}: ${webJsUrl}`);
                    
                    await loadScriptTag(webJsUrl);
                    await waitForImportMap();
                    
                    const asc = await import("assemblyscript/asc");
                    const compiler = asc.default || asc;
                    
                    await validateCompiler(compiler);
                    
                    const loadTime = Math.round(performance.now() - startTime);
                    COMPILER_METADATA.cdnProvider = cdn.name;
                    COMPILER_METADATA.loadTime = loadTime;
                    COMPILER_METADATA.attempts = i + 1;
                    
                    console.log(`[Loader] Success with ${cdn.name} in ${loadTime}ms`);
                    updateProgress(100, 'ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æº–å‚™å®Œäº†');
                    
                    return compiler;
                    
                } catch (error) {
                    console.error(`[Loader] ${cdn.name} failed:`, error.message);
                    cleanupFailedScripts();
                }
            }
            
            throw new Error(`All CDN providers failed for AssemblyScript ${version}`);
        }
        
        function loadScriptTag(url) {
            return new Promise((resolve, reject) => {
                if (window.ASSEMBLYSCRIPT_VERSION) {
                    console.log('[Loader] AssemblyScript already loaded');
                    resolve();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = url;
                script.dataset.assemblyScript = 'loading';
                
                const timeout = setTimeout(() => {
                    script.remove();
                    reject(new Error(`Timeout loading: ${url}`));
                }, 10000);
                
                script.onload = () => {
                    clearTimeout(timeout);
                    script.dataset.assemblyScript = 'loaded';
                    resolve();
                };
                
                script.onerror = () => {
                    clearTimeout(timeout);
                    script.remove();
                    reject(new Error(`Failed to load: ${url}`));
                };
                
                document.head.appendChild(script);
            });
        }
        
        async function waitForImportMap() {
            const maxAttempts = 20;
            const waitTime = 100;
            
            for (let i = 0; i < maxAttempts; i++) {
                if (window.ASSEMBLYSCRIPT_VERSION && window.ASSEMBLYSCRIPT_IMPORTMAP) {
                    console.log('[Loader] Import map ready');
                    return;
                }
                await new Promise(resolve => setTimeout(resolve, waitTime));
            }
            
            throw new Error('Import map setup timeout');
        }
        
        async function validateCompiler(compiler) {
            if (!compiler || typeof compiler.main !== 'function') {
                throw new Error('Invalid compiler structure');
            }
        }
        
        function cleanupFailedScripts() {
            const scripts = document.querySelectorAll('script[data-assembly-script]');
            scripts.forEach(script => {
                if (script.dataset.assemblyScript !== 'loaded') {
                    script.remove();
                }
            });
            
            delete window.ASSEMBLYSCRIPT_VERSION;
            delete window.ASSEMBLYSCRIPT_IMPORTMAP;
        }
        
        // ============================================
        // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚³ã‚¢
        // ============================================
        const CompilerCore = {
            compiler: null,
            
            init(ascInstance) {
                this.compiler = ascInstance;
                return true;
            },
            
            async compile(sourceCode, options) {
                if (!this.compiler) {
                    throw new Error('Compiler not initialized');
                }
                
                const compileOptions = this.buildOptions(options);
                let wasmBinary = null;
                let compileStats = '';
                
                const { error, stdout, stderr } = await this.compiler.main(compileOptions, {
                    readFile: (filename) => {
                        if (filename === "main.ts") return sourceCode;
                        return null;
                    },
                    writeFile: (filename, contents) => {
                        if (filename === "main.wasm") {
                            wasmBinary = contents;
                        }
                    },
                    listFiles: () => ["main.ts"]
                });
                
                if (error) throw new Error(stderr || error.toString());
                if (!wasmBinary) throw new Error('No WebAssembly binary generated');
                
                if (stdout) compileStats = stdout;
                
                return { wasmBinary, stats: compileStats };
            },
            
            buildOptions(userOptions) {
                const flags = ["main.ts", "-o", "main.wasm"];
                
                Object.entries(userOptions).forEach(([key, value]) => {
                    if (typeof value === 'boolean' && value) {
                        flags.push(`--${key}`);
                    } else if (typeof value !== 'boolean' && value !== '') {
                        flags.push(`--${key}`, value.toString());
                    }
                });
                
                return flags;
            }
        };
        
        // ============================================
        // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
        // ============================================
        const OptionsManager = {
            current: {},
            
            init() {
                this.current = { runtime: 'minimal' };
                this.loadFromStorage();
                this.updateUI();
            },
            
            apply(preset) {
                if (PRESETS[preset]) {
                    this.current = { ...PRESETS[preset] };
                    this.updateUI();
                    this.saveToStorage();
                }
            },
            
            collectFromUI() {
                const options = {};
                
                ['optimize', 'exportRuntime', 'noAssert', 'debug', 'sourceMap',
                 'measure', 'validate', 'importMemory', 'sharedMemory',
                 'exportTable', 'explicitStart', 'lowMemoryLimit'].forEach(opt => {
                    const el = document.getElementById(`opt-${opt}`);
                    if (el && el.checked) options[opt] = true;
                });
                
                ['optimizeLevel', 'shrinkLevel', 'runtime'].forEach(opt => {
                    const el = document.getElementById(`opt-${opt}`);
                    if (el && el.value) options[opt] = el.value;
                });
                
                this.current = options;
                this.saveToStorage();
                return options;
            },
            
            updateUI() {
                Object.keys(this.current).forEach(key => {
                    const el = document.getElementById(`opt-${key}`);
                    if (el) {
                        if (el.type === 'checkbox') {
                            el.checked = this.current[key] === true;
                        } else {
                            el.value = this.current[key] || '';
                        }
                    }
                });
            },
            
            saveToStorage() {
                try {
                    localStorage.setItem('asmOptions', JSON.stringify(this.current));
                } catch(e) {}
            },
            
            loadFromStorage() {
                try {
                    const saved = localStorage.getItem('asmOptions');
                    if (saved) this.current = JSON.parse(saved);
                } catch(e) {}
            }
        };
        
        // ============================================
        // WebAssemblyå®Ÿè¡Œç®¡ç†
        // ============================================
        const WasmRunner = {
            instance: null,
            
            async instantiate(wasmBinary, imports = {}) {
                const defaultImports = {
                    env: {
                        abort: (msg, file, line, column) => {
                            console.error(`Abort: ${msg} at ${file}:${line}:${column}`);
                        },
                        trace: (msg, n, ...args) => {
                            console.log(`Trace: ${msg}`, ...args);
                        },
                        seed: () => Date.now(),
                        memory: new WebAssembly.Memory({ initial: 1 })
                    },
                    Math: Math,
                    Date: Date
                };
                
                const mergedImports = this.mergeImports(defaultImports, imports);
                
                let buffer;
                if (wasmBinary instanceof ArrayBuffer) {
                    buffer = wasmBinary;
                } else if (wasmBinary instanceof Uint8Array) {
                    buffer = wasmBinary.buffer.slice(wasmBinary.byteOffset, 
                                                     wasmBinary.byteOffset + wasmBinary.byteLength);
                } else {
                    throw new Error('Unexpected binary format');
                }
                
                const wasmModule = await WebAssembly.compile(buffer);
                this.instance = await WebAssembly.instantiate(wasmModule, mergedImports);
                
                return this.instance.exports;
            },
            
            mergeImports(defaults, custom) {
                const merged = { ...defaults };
                Object.keys(custom).forEach(key => {
                    if (typeof custom[key] === 'object' && !Array.isArray(custom[key])) {
                        merged[key] = { ...defaults[key], ...custom[key] };
                    } else {
                        merged[key] = custom[key];
                    }
                });
                return merged;
            }
        };
        
        // ============================================
        // ãƒ—ãƒªã‚»ãƒƒãƒˆå®šç¾©
        // ============================================
        const PRESETS = {
            simple: {
                optimize: false,
                runtime: 'minimal'
            },
            debug: {
                optimize: false,
                optimizeLevel: '0',
                debug: true,
                sourceMap: true,
                measure: true
            },
            release: {
                optimize: true,
                optimizeLevel: '3',
                shrinkLevel: '1',
                noAssert: true
            },
            minimal: {
                optimize: true,
                optimizeLevel: '3',
                shrinkLevel: '2',
                runtime: 'stub',
                noAssert: true
            }
        };
        
        // ============================================
        // UIé–¢æ•°
        // ============================================
        function updateProgress(percent, message = '') {
            const container = document.getElementById('progress-container');
            const bar = document.getElementById('progress-bar');
            
            if (percent > 0 && percent < 100) {
                container.classList.add('active');
                bar.style.width = `${percent}%`;
                
                if (message) {
                    document.getElementById('stat-status').textContent = message;
                    console.log(`[Progress] ${message} (${percent}%)`);
                }
            } else if (percent >= 100) {
                bar.style.width = '100%';
                setTimeout(() => {
                    container.classList.remove('active');
                }, 500);
                
                if (message) {
                    document.getElementById('stat-status').textContent = message;
                }
            }
        }
        
        function showError(error) {
            const overlay = document.getElementById('error-overlay');
            const message = document.getElementById('error-message');
            
            message.textContent = error.message || error.toString();
            overlay.classList.add('active');
            
            console.error('[Error]', error);
        }
        
        window.hideError = function() {
            document.getElementById('error-overlay').classList.remove('active');
        };
        
        window.toggleSidebar = function() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            
            sidebar.classList.toggle('closed');
            mainContent.classList.toggle('sidebar-open');
        };
        
        window.switchTab = function(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        };
        
        window.applyPreset = function(preset) {
            OptionsManager.apply(preset);
            console.log(`[Options] Applied preset: ${preset}`);
        };
        
        window.resetApp = function() {
            document.getElementById('code-editor').value = AppModule.sourceCode;
            OptionsManager.init();
            compile();
        };
        
        function updateStats(compileTime, wasmSize) {
            document.getElementById('stat-compile-time').textContent = `${compileTime}ms`;
            document.getElementById('stat-wasm-size').textContent = formatBytes(wasmSize);
        }
        
        function formatBytes(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1048576) return (bytes / 1024).toFixed(2) + ' KB';
            return (bytes / 1048576).toFixed(2) + ' MB';
        }
        
        function updateCompilerInfo() {
            if (COMPILER_METADATA.version) {
                document.getElementById('compiler-version').textContent = `v${COMPILER_METADATA.version}`;
                document.getElementById('version-source').textContent = COMPILER_METADATA.versionSource;
                
                if (COMPILER_METADATA.cdnProvider) {
                    const cdnEl = document.getElementById('cdn-provider');
                    cdnEl.innerHTML = `<span class="cdn-badge ${COMPILER_METADATA.cdnProvider.toLowerCase()}">${COMPILER_METADATA.cdnProvider}</span>`;
                }
                
                if (COMPILER_METADATA.loadTime) {
                    document.getElementById('load-time').textContent = `${COMPILER_METADATA.loadTime}ms`;
                }
            }
        }
        
        // ============================================
        // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«é–¢æ•°
        // ============================================
        window.compile = async function() {
            if (!compilerReady) {
                console.warn('[Compile] Compiler not ready yet');
                return;
            }
            
            const sourceCode = document.getElementById('code-editor').value;
            const options = OptionsManager.collectFromUI();
            
            try {
                updateProgress(10, 'ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«é–‹å§‹...');
                const startTime = performance.now();
                
                const { wasmBinary, stats } = await CompilerCore.compile(sourceCode, options);
                
                updateProgress(50, 'WebAssemblyç”Ÿæˆå®Œäº†...');
                
                wasmExports = await WasmRunner.instantiate(wasmBinary, AppModule.getImports ? AppModule.getImports() : {});
                
                updateProgress(80, 'åˆæœŸåŒ–ä¸­...');
                
                if (AppModule.init) {
                    await AppModule.init(wasmExports);
                }
                
                if (AppModule.execute) {
                    AppModule.execute(wasmExports);
                }
                
                const compileTime = Math.round(performance.now() - startTime);
                const wasmSize = wasmBinary.byteLength || wasmBinary.length;
                
                updateStats(compileTime, wasmSize);
                updateProgress(100, 'å®Ÿè¡Œä¸­');
                
                console.log('[Compile] Success:', stats);
                
            } catch (error) {
                updateProgress(0);
                showError(error);
                document.getElementById('stat-status').textContent = 'ã‚¨ãƒ©ãƒ¼';
            }
        };
        
        // ============================================
        // åˆæœŸåŒ–
        // ============================================
        async function initialize() {
            console.log('[Init] Starting initialization...');
            updateProgress(5, 'åˆæœŸåŒ–é–‹å§‹...');
            
            try {
                // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ç¢ºèª
                const isDebug = localStorage.getItem('debug') === 'true';
                if (isDebug) {
                    document.getElementById('compiler-info').classList.remove('hidden');
                }
                
                // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©èª­ã¿è¾¼ã¿
                updateProgress(10, 'ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©èª­ã¿è¾¼ã¿æº–å‚™...');
                const compiler = await CompilerLoader.load();
                
                CompilerCore.init(compiler);
                compilerReady = true;
                
                // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æƒ…å ±æ›´æ–°
                updateCompilerInfo();
                
                // ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
                OptionsManager.init();
                
                // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼åˆæœŸè¨­å®š
                const editor = document.getElementById('code-editor');
                editor.value = AppModule.sourceCode;
                
                // AppModule ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³é©ç”¨
                if (AppModule.defaultOptions) {
                    Object.entries(AppModule.defaultOptions).forEach(([key, value]) => {
                        const el = document.getElementById(`opt-${key}`);
                        if (el) {
                            if (el.type === 'checkbox') {
                                el.checked = value === true;
                            } else {
                                el.value = value;
                            }
                        }
                    });
                }
                
                // çµ±è¨ˆè¡¨ç¤ºè¨­å®šã®ç¢ºèª
                const showStats = document.getElementById('show-stats');
                const statsPanel = document.getElementById('stats-panel');
                if (!showStats.checked) {
                    statsPanel.style.display = 'none';
                }
                
                showStats.addEventListener('change', (e) => {
                    statsPanel.style.display = e.target.checked ? 'block' : 'none';
                });
                
                // è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
                const autoCompile = document.getElementById('auto-compile');
                if (autoCompile.checked) {
                    await compile();
                }
                
                console.log('[Init] Initialization complete');
                
            } catch (error) {
                updateProgress(0);
                showError(error);
                console.error('[Init] Initialization failed:', error);
            }
        }
        
        // ============================================
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•
        // ============================================
        window.addEventListener('DOMContentLoaded', () => {
            console.log('[App] DOM Content Loaded');
            console.log('[App] Module:', AppModule.name);
            initialize();
        });
    </script>
</body>
</html>
```

## **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¢ã«ã¤ã„ã¦**

ã“ã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ãªã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¢ã¨ã—ã¦å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### **ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã®æ©Ÿèƒ½**
- â• **å¢—åŠ **: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’1å¢—ã‚„ã™
- â– **æ¸›å°‘**: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’1æ¸›ã‚‰ã™  
- ğŸ”„ **ãƒªã‚»ãƒƒãƒˆ**: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’0ã«ãƒªã‚»ãƒƒãƒˆ
- ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã®è¡¨ç¤ºï¼ˆWebAssemblyãƒšãƒ¼ã‚¸æ•°ï¼‰

### **AppModuleã®ç½®ãæ›ãˆ**

ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¿œã˜ã¦ã€`AppModule`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ¥ã®å®Ÿè£…ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§ã€æ§˜ã€…ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã§ãã¾ã™ã€‚

---

## **ğŸ¤– æ±ç”¨AIå®Ÿè£…ã‚¬ã‚¤ãƒ‰**

### **ã‚¹ãƒ†ãƒƒãƒ—0å®Ÿè¡Œã®é‡è¦æ€§**

ç”ŸæˆAIãŒHTMLã‚’ç”Ÿæˆã™ã‚‹éš›ã€**å¿…ãšæœ€åˆã«ã‚¹ãƒ†ãƒƒãƒ—0ã‚’å®Ÿè¡Œ**ã—ã¦ãã ã•ã„ï¼š

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ã®æ˜ç¢ºæ€§ã‚’ç¢ºèª**
2. **ä¸æ˜ç¢ºãªå ´åˆã¯ä½œæ¥­ã‚’ä¸­æ–­ã—ã¦å•ã„åˆã‚ã›**
3. **æ˜ç¢ºãªå›ç­”ã‚’å¾—ã¦ã‹ã‚‰å®Ÿè£…ã‚’é–‹å§‹**
4. **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ãƒ—ãƒªã®è‡ªå‹•ç”Ÿæˆã¯å³ç¦**

### **å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—ã®å®Ÿè£…**

ç”ŸæˆAIãŒHTMLã‚’ç”Ÿæˆã™ã‚‹éš›ã€ä»¥ä¸‹ã®æ‰‹é †ã§æœ€æ–°ç‰ˆã‚’å–å¾—ã—ã¦ãã ã•ã„ï¼š

1. **VersionManagerã‚’çµ„ã¿è¾¼ã‚€**
2. **jsDelivr APIå„ªå…ˆã§è©¦è¡Œ**
3. **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã—ã¦0.28.8ã‚’ä½¿ç”¨**
4. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ã‚’æ´»ç”¨**

### **å…¬å¼æ¨å¥¨æ–¹å¼äº’æ›ã®éµå®ˆ**

ç”ŸæˆAIãŒHTMLã‚’ç”Ÿæˆã™ã‚‹éš›ã€ä»¥ä¸‹ã®å®Ÿè£…æ–¹é‡ã‚’å³å®ˆã—ã¦ãã ã•ã„ï¼š

1. **ç›´æ¥importã¯çµ¶å¯¾ã«ä½¿ç”¨ã—ãªã„**
2. **å¿…ãšweb.jsçµŒç”±ã§ãƒ­ãƒ¼ãƒ‰**
3. **CDNã¯jsDelivrã¨UNPKGã®2ã¤ã®ã¿**
4. **import mapã®è¨­å®šã‚’å¾…æ©Ÿ**

### **å®Ÿè£…ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ**

```
0. ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ã‚’å—ä¿¡
   â†“
1. è¦æ±‚ã®æ˜ç¢ºæ€§ã‚’ç¢ºèªï¼ˆã‚¹ãƒ†ãƒƒãƒ—0ï¼‰
   â”œâ”€ ä¸æ˜ç¢º â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å•ã„åˆã‚ã› â†’ å›ç­”å¾…ã¡
   â””â”€ æ˜ç¢º â†’ æ¬¡ã¸é€²è¡Œ
   â†“
2. å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—
   â†“
3. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹åˆ¤å®š
   â†“
4. AssemblyScriptã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
   â†“
5. AppModuleç”Ÿæˆ
   â†“
6. HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆv1.4.0ã‚’ä½¿ç”¨
   â†“
7. å˜ä¸€HTMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›
```

### **ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹åˆ¥å®Ÿè£…ä¾‹**

#### **1. ç‰©ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒœãƒ¼ãƒ«ï¼‰**

```javascript
const AppModule = {
    name: "Ball Physics Demo",
    description: "ç‰©ç†æ¼”ç®—ã«ã‚ˆã‚‹ãƒœãƒ¼ãƒ«ã®å‹•ãã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
    
    sourceCode: `
export class Ball {
    x: f32 = <f32>300.0;
    y: f32 = <f32>200.0;
    vx: f32 = <f32>3.0;
    vy: f32 = <f32>2.0;
    radius: f32 = <f32>15.0;
}

let ball = new Ball();

export function update(): void {
    ball.x += ball.vx;
    ball.y += ball.vy;
    
    if (ball.x - ball.radius <= 0 || ball.x + ball.radius >= 600) {
        ball.vx = -ball.vx;
    }
    if (ball.y - ball.radius <= 0 || ball.y + ball.radius >= 400) {
        ball.vy = -ball.vy;
    }
}

export function getX(): f32 { return ball.x; }
export function getY(): f32 { return ball.y; }
export function getRadius(): f32 { return ball.radius; }
    `.trim(),
    
    async init(wasmExports) {
        const viewport = document.getElementById('app-viewport');
        viewport.innerHTML = '<canvas id="canvas" width="600" height="400" style="border: 1px solid #e5e7eb; border-radius: 8px;"></canvas>';
    },
    
    execute(wasmExports) {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        function animate() {
            wasmExports.update();
            
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, 600, 400);
            
            const x = wasmExports.getX();
            const y = wasmExports.getY();
            const r = wasmExports.getRadius();
            
            ctx.fillStyle = '#667eea';
            ctx.beginPath();
            ctx.arc(x, y, r, 0, Math.PI * 2);
            ctx.fill();
            
            requestAnimationFrame(animate);
        }
        animate();
    }
};
```

#### **2. ç”»åƒãƒ•ã‚£ãƒ«ã‚¿å‡¦ç†ï¼ˆv1.4.0 æ­£å¸¸å‹•ä½œç‰ˆï¼‰**

```javascript
const AppModule = {
    name: "Image Filter Processor",
    description: "é«˜é€Ÿç”»åƒãƒ•ã‚£ãƒ«ã‚¿å‡¦ç†",
    
    sourceCode: `
// ã‚°ãƒ­ãƒ¼ãƒãƒ«ç”»åƒãƒãƒƒãƒ•ã‚¡ï¼ˆå†åˆ©ç”¨å¯èƒ½ï¼‰
let imageBuffer: Uint8ClampedArray | null = null;

// ãƒãƒƒãƒ•ã‚¡ã®åˆæœŸåŒ–ã¾ãŸã¯å†å‰²ã‚Šå½“ã¦
export function initBuffer(size: i32): void {
    imageBuffer = new Uint8ClampedArray(size);
}

// ãƒãƒƒãƒ•ã‚¡ã®ãƒã‚¤ãƒ³ã‚¿å–å¾—ï¼ˆJavaScriptå´ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ”ãƒ¼ç”¨ï¼‰
export function getBufferPtr(): usize {
    if (!imageBuffer) return 0;
    return imageBuffer!.dataStart;
}

// ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ï¼ˆTypedArrayãƒ™ãƒ¼ã‚¹ï¼‰
export function applyGrayscale(): void {
    if (!imageBuffer) return;
    
    let data = imageBuffer!;
    let length = data.length;
    
    for (let i = 0; i < length; i += 4) {
        let r = unchecked(data[i]);
        let g = unchecked(data[i + 1]);
        let b = unchecked(data[i + 2]);
        
        // ITU-R BT.601è¦æ ¼ã®ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«è¨ˆç®—
        let gray = <u8>(
            <f32>r * <f32>0.299 + 
            <f32>g * <f32>0.587 + 
            <f32>b * <f32>0.114
        );
        
        unchecked(data[i] = gray);
        unchecked(data[i + 1] = gray);
        unchecked(data[i + 2] = gray);
        // Alphaå€¤ï¼ˆi + 3ï¼‰ã¯å¤‰æ›´ã—ãªã„
    }
}

// ã‚»ãƒ”ã‚¢ãƒˆãƒ¼ãƒ³åŠ¹æœ
export function applySepia(): void {
    if (!imageBuffer) return;
    
    let data = imageBuffer!;
    let length = data.length;
    
    for (let i = 0; i < length; i += 4) {
        let r = unchecked(data[i]);
        let g = unchecked(data[i + 1]);
        let b = unchecked(data[i + 2]);
        
        let tr = <f32>r * <f32>0.393 + <f32>g * <f32>0.769 + <f32>b * <f32>0.189;
        let tg = <f32>r * <f32>0.349 + <f32>g * <f32>0.686 + <f32>b * <f32>0.168;
        let tb = <f32>r * <f32>0.272 + <f32>g * <f32>0.534 + <f32>b * <f32>0.131;
        
        unchecked(data[i] = <u8>Math.min(255, tr));
        unchecked(data[i + 1] = <u8>Math.min(255, tg));
        unchecked(data[i + 2] = <u8>Math.min(255, tb));
    }
}

// åè»¢åŠ¹æœ
export function applyInvert(): void {
    if (!imageBuffer) return;
    
    let data = imageBuffer!;
    let length = data.length;
    
    for (let i = 0; i < length; i += 4) {
        unchecked(data[i] = 255 - data[i]);
        unchecked(data[i + 1] = 255 - data[i + 1]);
        unchecked(data[i + 2] = 255 - data[i + 2]);
    }
}

// æ˜åº¦èª¿æ•´
export function adjustBrightness(factor: f32): void {
    if (!imageBuffer) return;
    
    let data = imageBuffer!;
    let length = data.length;
    
    for (let i = 0; i < length; i += 4) {
        let r = <f32>unchecked(data[i]) * factor;
        let g = <f32>unchecked(data[i + 1]) * factor;
        let b = <f32>unchecked(data[i + 2]) * factor;
        
        unchecked(data[i] = <u8>Math.max(0, Math.min(255, r)));
        unchecked(data[i + 1] = <u8>Math.max(0, Math.min(255, g)));
        unchecked(data[i + 2] = <u8>Math.max(0, Math.min(255, b)));
    }
}

// ãƒ¡ãƒ¢ãƒªçµ±è¨ˆæƒ…å ±ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
export function getMemoryStats(): i32 {
    return memory.size(); // ãƒšãƒ¼ã‚¸æ•°ã‚’è¿”ã™
}

// ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºå–å¾—
export function getBufferSize(): i32 {
    return imageBuffer ? imageBuffer!.length : 0;
}
    `.trim(),
    
    defaultOptions: {
        optimize: true,
        optimizeLevel: '3',
        shrinkLevel: '1',
        noAssert: true,
        runtime: 'minimal',
        importMemory: false,  // å†…éƒ¨ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨
        exportRuntime: false  // ãƒ©ãƒ³ã‚¿ã‚¤ãƒ é–¢æ•°ã¯ä¸è¦
    },
    
    // JavaScriptã§ã®ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨å‡¦ç†
    applyFilter(wasmExports, filterType, imageData) {
        const dataLength = imageData.data.length;
        
        // ãƒãƒƒãƒ•ã‚¡ã‚’åˆæœŸåŒ–
        wasmExports.initBuffer(dataLength);
        const bufferPtr = wasmExports.getBufferPtr();
        
        if (bufferPtr === 0) {
            throw new Error('Failed to initialize buffer');
        }
        
        // WebAssemblyãƒ¡ãƒ¢ãƒªã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼
        const wasmMemory = new Uint8ClampedArray(wasmExports.memory.buffer);
        for (let i = 0; i < dataLength; i++) {
            wasmMemory[bufferPtr + i] = imageData.data[i];
        }
        
        // ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨
        switch(filterType) {
            case 'grayscale':
                wasmExports.applyGrayscale();
                break;
            case 'sepia':
                wasmExports.applySepia();
                break;
            case 'invert':
                wasmExports.applyInvert();
                break;
            case 'bright':
                wasmExports.adjustBrightness(1.3);
                break;
            case 'dark':
                wasmExports.adjustBrightness(0.7);
                break;
        }
        
        // å‡¦ç†æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        const updatedWasmMemory = new Uint8ClampedArray(wasmExports.memory.buffer);
        const updatedBufferPtr = wasmExports.getBufferPtr();
        
        for (let i = 0; i < dataLength; i++) {
            imageData.data[i] = updatedWasmMemory[updatedBufferPtr + i];
        }
        
        return imageData;
    }
};
```

---

## **ğŸ“š ä»˜éŒ²**

### **AssemblyScriptå‹å¯¾å¿œè¡¨**

| AssemblyScript | JavaScript | ç”¨é€” |
|---------------|------------|------|
| i32 | number | æ•´æ•°æ¼”ç®— |
| f32 | number | å˜ç²¾åº¦æµ®å‹•å°æ•°ç‚¹ |
| f64 | number | å€ç²¾åº¦æµ®å‹•å°æ•°ç‚¹ |
| i64 | BigInt | å¤§ããªæ•´æ•° |
| bool | boolean | çœŸå½å€¤ |

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™**

- åˆå›ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«: < 5ç§’
- å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«: < 3ç§’
- WASMã‚µã‚¤ã‚º: 1KBï½50KBï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¾å­˜ï¼‰
- å®Ÿè¡Œé€Ÿåº¦: JavaScriptã®2ï½10å€ï¼ˆå‡¦ç†å†…å®¹ä¾å­˜ï¼‰

### **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**

| å•é¡Œ | åŸå›  | è§£æ±ºç­– |
|------|------|---------|
| "import map not found" | web.jsèª­ã¿è¾¼ã¿å¤±æ•— | CDNãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒè‡ªå‹•å¯¾å¿œ |
| ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©èª­ã¿è¾¼ã¿å¤±æ•— | CDNéšœå®³/ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ | 2ã¤ã®CDNã§è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ |
| ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | é…ã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ | æ¬¡ã®CDNã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ |
| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´ | ç ´å£Šçš„å¤‰æ›´ | å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—ãŒå¯¾å¿œ |
| ä½ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | æœ€é©åŒ–ãªã— | --optimizeã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ– |
| å¤§ããªWASMã‚µã‚¤ã‚º | ãƒ‡ãƒãƒƒã‚°æƒ…å ± | --debugã‚’ç„¡åŠ¹åŒ–ã€--shrinkLevelã‚’ä¸Šã’ã‚‹ |
| ãƒ•ã‚£ãƒ«ã‚¿ãŒé©ç”¨ã•ã‚Œãªã„ | ãƒ¡ãƒ¢ãƒªç®¡ç†ã®èª¤ã‚Š | TypedArrayã¨uncheckedã‚’ä½¿ç”¨ |
| å‹å¤‰æ›ã‚¨ãƒ©ãƒ¼ | æš—é»™çš„å‹å¤‰æ› | æ˜ç¤ºçš„ãª<f32>ã‚­ãƒ£ã‚¹ãƒˆã‚’è¿½åŠ  |

### **ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ**

```javascript
// ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
localStorage.setItem('debug', 'true');

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æƒ…å ±ãƒ‘ãƒãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆv1.3.1å¼·åŒ–ï¼‰
// - AssemblyScriptãƒãƒ¼ã‚¸ãƒ§ãƒ³
// - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—å…ƒï¼ˆDynamic/Fallbackï¼‰
// - ä½¿ç”¨ã—ãŸCDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆè‰²åˆ†ã‘è¡¨ç¤ºï¼‰
// - èª­ã¿è¾¼ã¿æ™‚é–“
// - è©¦è¡Œå›æ•°

// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§è©³ç´°ãƒ­ã‚°ç¢ºèª
// [Version] ã‚¿ã‚°ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—çŠ¶æ³
// [Loader] ã‚¿ã‚°ã§èª­ã¿è¾¼ã¿é€²è¡ŒçŠ¶æ³
// [Init] ã‚¿ã‚°ã§åˆæœŸåŒ–çŠ¶æ³
// [Progress] ã‚¿ã‚°ã§é€²æ—çŠ¶æ³
// [Compile] ã‚¿ã‚°ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆé–¢æ•°ç¢ºèª
// [Filter] ã‚¿ã‚°ã§ç”»åƒå‡¦ç†ã®è©³ç´°
```

### **CDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è©³ç´°**

| CDN | URL | ç‰¹å¾´ | æ¨å¥¨ç”¨é€” |
|-----|-----|------|----------|
| **jsDelivr** | cdn.jsdelivr.net | æœ€é€Ÿãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«CDNãƒ»å…¬å¼æ¨å¥¨ | ç¬¬1é¸æŠ |
| **UNPKG** | unpkg.com | npmå…¬å¼ãƒŸãƒ©ãƒ¼ãƒ»å®Œå…¨æ€§ä¿è¨¼ | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ |

---

## **ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**

MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ - è‡ªç”±ã«ä½¿ç”¨ãƒ»æ”¹å¤‰ãƒ»å†é…å¸ƒãƒ»å•†ç”¨åˆ©ç”¨å¯èƒ½

---

## **ğŸ“„ æ›´æ–°å±¥æ­´**

### **v1.4.0** (2025-01) - ãƒ¡ãƒ¢ãƒªç®¡ç†ã¨ã‚µãƒ³ãƒ—ãƒ«ä¿®æ­£
**ä¸»ãªå¤‰æ›´å†…å®¹ï¼š**
- âœ… **ç”»åƒãƒ•ã‚£ãƒ«ã‚¿ã‚µãƒ³ãƒ—ãƒ«ã®ä¿®æ­£**: TypedArrayãƒ™ãƒ¼ã‚¹ã®æ­£å¸¸å‹•ä½œç‰ˆã«æ›´æ–°
- âœ… **ãƒ¡ãƒ¢ãƒªç®¡ç†èª¬æ˜ã®è¿½åŠ **: æ¨™æº–çš„ãªãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã®è©³ç´°èª¬æ˜
- âœ… **å‹å¤‰æ›ã®æ”¹å–„**: ã™ã¹ã¦ã®æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã«æ˜ç¤ºçš„ã‚­ãƒ£ã‚¹ãƒˆ
- âœ… **ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½å¼·åŒ–**: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆé–¢æ•°ã¨ãƒ¡ãƒ¢ãƒªçŠ¶æ…‹ã®ç¢ºèª
- âœ… **ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹è¿½åŠ **: uncheckedæœ€é©åŒ–ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ•ã‚¡
- âœ… **HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåˆ†é›¢**: åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«åŒ–ã«ã‚ˆã‚Šä¿å®ˆæ€§å‘ä¸Š

**æŠ€è¡“çš„æ”¹å–„ï¼š**
- TypedArrayã«ã‚ˆã‚‹å‹å®‰å…¨ãªãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹
- unchecked()ã«ã‚ˆã‚‹å¢ƒç•Œãƒã‚§ãƒƒã‚¯çœç•¥
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ•ã‚¡ã«ã‚ˆã‚‹GCè² è·è»½æ¸›
- load/storeçµ„ã¿è¾¼ã¿é–¢æ•°ã®é©åˆ‡ãªä½¿ã„åˆ†ã‘

### **v1.3.1** (2025-01) - å®‰å®šæ€§ã¨ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®å‘ä¸Š
**ä¸»ãªå¤‰æ›´å†…å®¹ï¼š**
- âœ… **å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—æ©Ÿèƒ½è¿½åŠ **: jsDelivr APIå„ªå…ˆã§ã®æœ€æ–°ç‰ˆå–å¾—
- âœ… **CDNæœ€é©åŒ–**: esm.shã‚’é™¤å¤–ã—2ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ä½“åˆ¶ã¸
- âœ… **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã‚ˆã‚‹é«˜é€ŸåŒ–
- âœ… **åˆæœŸåŒ–æ™‚é–“çŸ­ç¸®**: æœ€æ‚ªã‚±ãƒ¼ã‚¹30ç§’â†’20ç§’
- âœ… **ãƒ‡ãƒãƒƒã‚°æƒ…å ±å¼·åŒ–**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—å…ƒã®å¯è¦–åŒ–

### **v1.3.0** (2025-09) - å…¬å¼æ¨å¥¨æ–¹å¼äº’æ›ã¸ã®å®Œå…¨ç§»è¡Œ
**ä¸»ãªå¤‰æ›´å†…å®¹ï¼š**
- âœ… **èª­ã¿è¾¼ã¿æ–¹å¼ã®çµ±ä¸€**: å…¬å¼äº’æ›ã®web.jsæ–¹å¼ã®ã¿ã‚’ä½¿ç”¨
- âœ… **ç›´æ¥importã®å‰Šé™¤**: å•é¡Œã®å¤šã„ç›´æ¥importæ–¹å¼ã‚’å®Œå…¨å‰Šé™¤
- âœ… **3ã¤ã®CDNãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼**: jsDelivr â†’ UNPKG â†’ esm.sh
- âœ… **å®Ÿè£…ã®ç°¡ç´ åŒ–**: å˜ä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ä¿å®ˆæ€§å¤§å¹…å‘ä¸Š

### **v1.2.2** (2025-09) - å…¬å¼äº’æ›å®Ÿè£…ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã®è¿½åŠ 
**ä¸»ãªå¤‰æ›´å†…å®¹ï¼š**
- âœ… **3æ®µéšãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿæ§‹**: ç›´æ¥import â†’ ä»£æ›¿CDN â†’ å…¬å¼web.js
- âœ… **å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: GitHubã‚¿ã‚°ã‹ã‚‰æœ€æ–°å®‰å®šç‰ˆã‚’å–å¾—
- âœ… **@latestç¦æ­¢ãƒ«ãƒ¼ãƒ«**: å…·ä½“çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã‚’å¿…é ˆåŒ–
- âœ… **è¨ºæ–­æ©Ÿèƒ½å¼·åŒ–**: èª­ã¿è¾¼ã¿æ–¹æ³•ã®ãƒ­ã‚®ãƒ³ã‚°ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²

### **v1.2.1** (2025-09) - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ç¢ºèªãƒ—ãƒ­ã‚»ã‚¹ã®è¿½åŠ 
**ä¸»ãªå¤‰æ›´å†…å®¹ï¼š**
- âœ… **ã‚¹ãƒ†ãƒƒãƒ—0è¿½åŠ **: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ãŒä¸æ˜ç¢ºãªå ´åˆã®ç¢ºèªãƒ—ãƒ­ã‚»ã‚¹ã‚’å¿…é ˆåŒ–
- âœ… **ä½œæ¥­ä¸­æ–­ãƒ«ãƒ¼ãƒ«**: æ›–æ˜§ãªæŒ‡ç¤ºã§ã®è‡ªå‹•åˆ¤æ–­ã‚’ç¦æ­¢
- âœ… **å•ã„åˆã‚ã›ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: æ§‹é€ åŒ–ã•ã‚ŒãŸè³ªå•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æä¾›

### **v1.2** (2025-09) - UI/UXå…¨é¢æ”¹è‰¯
**ä¸»ãªå¤‰æ›´å†…å®¹ï¼š**
- âœ… **ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¡ç”¨**: ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªç”»é¢åˆ©ç”¨
- âœ… **ã‚¿ãƒ–å‹è¨­å®šç®¡ç†**: ã‚¢ãƒ—ãƒªè¨­å®šã¨WebAssemblyè¨­å®šã‚’è«–ç†çš„ã«åˆ†é›¢
- âœ… **WASMçµ±è¨ˆæƒ…å ±ãƒˆã‚°ãƒ«**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆOFFã§å¿…è¦æ™‚ã®ã¿è¡¨ç¤º
- âœ… **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: ãƒ¢ãƒã‚¤ãƒ«ã‹ã‚‰ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¾ã§

### **v1.1** (2025-09) - ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³å•é¡Œã®è§£æ±º
**ä¸»ãªå¤‰æ›´å†…å®¹ï¼š**
- âœ… **Dynamic Importæ¡ç”¨**: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°ã«ã‚ˆã‚‹ç›´æ¥èª­ã¿è¾¼ã¿ã‚’å‰Šé™¤
- âœ… **ãƒªãƒˆãƒ©ã‚¤ãƒ¡ã‚«ãƒ‹ã‚ºãƒ è¿½åŠ **: è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã¨Exponential Backoff
- âœ… **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä¿è­·**: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©èª­ã¿è¾¼ã¿ã«ä¸Šé™è¨­å®š

### **v1.0** (2025-09) - åˆç‰ˆãƒªãƒªãƒ¼ã‚¹
- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¡ç”¨
- è‡ªå‹•åˆæœŸåŒ–æ©Ÿèƒ½
- 15ç¨®é¡ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- ã‚¨ãƒ©ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤æ©Ÿèƒ½

---

## **ğŸ“Š ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ¥æ©Ÿèƒ½æ¯”è¼ƒ**

| æ©Ÿèƒ½ | v1.0 | v1.1 | v1.2 | v1.2.1 | v1.2.2 | v1.3.0 | v1.3.1 | v1.4.0 |
|------|------|------|------|--------|--------|--------|--------|--------|
| åŸºæœ¬ã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³å¯¾ç­– | âŒ | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| ãƒ¢ãƒ€ãƒ³UI | âŒ | âŒ | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ç¢ºèª | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… | âœ… | âœ… |
| å…¬å¼äº’æ›ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ | âŒ | âŒ |
| å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… | âœ… |
| å…¬å¼æ–¹å¼äº’æ› | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… |
| jsDelivrå„ªå…ˆ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… |
| 2CDNä½“åˆ¶ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… |
| ãƒ¡ãƒ¢ãƒªç®¡ç†èª¬æ˜ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| æ­£å¸¸å‹•ä½œã‚µãƒ³ãƒ—ãƒ« | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåˆ†é›¢ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |

---

**ç”Ÿæˆæ—¥**: 2025å¹´9æœˆ  
**ãƒ¬ã‚·ãƒ”ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.4.0  
**AssemblyScriptå¯¾å¿œãƒãƒ¼ã‚¸ãƒ§ãƒ³**: å‹•çš„å–å¾—ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: 0.28.8ï¼‰
